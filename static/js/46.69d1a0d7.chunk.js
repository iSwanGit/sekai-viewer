(this["webpackJsonpsekai-viewer"]=this["webpackJsonpsekai-viewer"]||[]).push([[46],{6032:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(35),r=a(5969),c=Object(r.a)((function(e){return{container:{margin:e.spacing(1,0),padding:e.spacing(1,2)},caption:Object(n.a)({},e.breakpoints.up("md"),{textAlign:"right"}),sliderContainer:Object(n.a)({},e.breakpoints.up("md"),{paddingRight:e.spacing(5)}),inputHidden:{display:"none"},noDecoration:{textDecoration:"none","&:hover":{textDecoration:"underline"},color:e.palette.text.primary}}}))},6037:function(e,t,a){"use strict";var n=a(29),r=a(88),c=a(14),i=a(5976),o=a(6211),l=a(0),s=a.n(l),u=["xs","sm","md","lg","xl"],m={xs:12,md:4};t.a=function(e){var t=e.ViewComponent,a=e.callback,d=e.data,f=e.gridSize,b=e.viewProps,p=e.onComponentClick,O=function(e){var t=Object(r.a)({},e||m);return u.forEach((function(e,a,n){t[e]||(t[e]=a>0?t[n[a-1]]:12)})),t}(f),j=function(){var e=Object(c.a)();return u.map((function(t){return Object(i.a)(e.breakpoints.down(t))&&t})).find(Boolean)||u[u.length-1]}(),g=Object(l.useState)(!0),y=Object(n.a)(g,2),E=y[0],x=y[1],h=Object(l.useRef)(new IntersectionObserver((function(e){return a(e,x)}),{threshold:.5})),v=Object(l.useRef)(null);Object(l.useEffect)((function(){x(!0)}),[d]),Object(l.useEffect)((function(){var e=h.current,t=v.current;return t&&e.observe(t),function(){t&&e.unobserve(t)}}));var w=12/O[j],k=d.length?w:2*w;return s.a.createElement(l.Fragment,null,s.a.createElement(o.a,{container:!0,direction:"row",spacing:1},d.length?d.map((function(e,a){return s.a.createElement(o.a,{key:e.id,item:!0,xs:O.xs,sm:O.sm,md:O.md,lg:O.lg,xl:O.xl,onClick:function(){p&&p(e)}},s.a.createElement(t,Object.assign({data:e,index:a},b)))})):null),s.a.createElement(o.a,{container:!0,direction:"row",ref:v,style:{display:E?"flex":"none",paddingTop:"4px"},spacing:1},Array.from({length:k}).map((function(e,a){return s.a.createElement(o.a,{key:"empty-".concat(a),item:!0,xs:O.xs,sm:O.sm,md:O.md,lg:O.lg,xl:O.xl},s.a.createElement(t,null))}))))}},6114:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return c})),a.d(t,"c",(function(){return i})),a.d(t,"d",(function(){return o}));var n=a(41);function r(e,t){switch(t.type){case"add":return[].concat(Object(n.a)(e),[t.payload]);case"remove":return[].concat(Object(n.a)(e.slice(0,e.indexOf(t.payload))),Object(n.a)(e.slice(e.indexOf(t.payload)+1)));case"reset":return[];default:throw new Error}}function c(e,t){switch(t.type){case"add":return[].concat(Object(n.a)(e),[t.payload]);case"remove":return[].concat(Object(n.a)(e.slice(0,e.indexOf(t.payload))),Object(n.a)(e.slice(e.indexOf(t.payload)+1)));case"reset":return[];default:throw new Error}}function i(e,t){switch(t.type){case"add":return[].concat(Object(n.a)(e),[t.payload]);case"remove":return[].concat(Object(n.a)(e.slice(0,e.indexOf(t.payload))),Object(n.a)(e.slice(e.indexOf(t.payload)+1)));case"reset":return[];default:throw new Error}}function o(e,t){switch(t.type){case"add":var a=[].concat(Object(n.a)(e),[t.payload]);return localStorage.setItem("team-build-array",JSON.stringify(a)),a;case"remove":var r=[].concat(Object(n.a)(e.slice(0,t.payload)),Object(n.a)(e.slice(t.payload+1)));return localStorage.setItem("team-build-array",JSON.stringify(r)),r;case"replace":var c=[].concat(Object(n.a)(e.slice(0,t.payload.id)),[t.payload.data],Object(n.a)(e.slice(t.payload.id+1)));return localStorage.setItem("team-build-array",JSON.stringify(c)),c;default:throw new Error}}},6889:function(e,t,a){"use strict";a.r(t);var n=a(41),r=a(29),c=a(47),i=a(6005),o=a(6211),l=a(6279),s=a(5957),u=a(5975),m=a(133),d=a(6269),f=a(6844),b=a(6845),p=a(38),O=a(0),j=a.n(O),g=a(5933),y=a(6114),E=a(6032),x=a(6022),h=a(6021),v=a(6037),w=a(5969),k=a(6119),S=a(6143),I=a(6123),N=a(6115),C=a(51),T=a(49),B=a(6026),_=a(6138),J=a(6131),z=Object(w.a)((function(e){return{media:{paddingTop:"5%",backgroundSize:"contain"},card:{cursor:"pointer"},header:{},"grid-out":{padding:e.spacing("1%","2%")}}})),M={grid:function(e){var t=e.data,a=z(),n=Object(T.c)().getTranslated,i=Object(O.useContext)(C.a).contentTransMode,l=Object(h.e)("resourceBoxes"),s=Object(r.a)(l,1)[0],u=Object(O.useState)([]),m=Object(r.a)(u,2),d=m[0],f=m[1];return Object(O.useEffect)((function(){s.length&&t&&f(s.find((function(e){return"mission_reward"===e.resourceBoxPurpose&&t.rewards.some((function(t){return t.resourceBoxId===e.id}))})).details)}),[t,s]),t?j.a.createElement(O.Fragment,null,j.a.createElement(k.a,{className:a.card},j.a.createElement(o.a,{container:!0,alignItems:"center"},j.a.createElement(o.a,{item:!0,xs:8,md:9},j.a.createElement(S.a,{style:{paddingBottom:"16px"}},j.a.createElement(o.a,{container:!0,direction:"column",spacing:1},j.a.createElement(o.a,{item:!0},j.a.createElement(B.b,{mode:i,contentKey:"normal_mission:".concat(t.id),original:t.sentence,originalProps:{variant:"subtitle1",className:a.header}}))))),j.a.createElement(o.a,{item:!0,xs:4,md:3},j.a.createElement(I.a,{className:a.media,title:n(i,"normal_mission:".concat(t.id),t.sentence)},d.map((function(e){return"material"===e.resourceType?j.a.createElement(J.a,{materialId:e.resourceId,quantity:e.resourceQuantity}):j.a.createElement(_.a,{materialName:e.resourceType,quantity:e.resourceQuantity})}))))))):j.a.createElement(k.a,{className:a.card},j.a.createElement(o.a,{container:!0,alignItems:"center"},j.a.createElement(o.a,{item:!0,xs:8},j.a.createElement(S.a,null,j.a.createElement(c.a,{variant:"subtitle1",className:a.header},j.a.createElement(N.a,{variant:"text",width:"90%"})))),j.a.createElement(o.a,{item:!0,xs:4,container:!0,justify:"center"},j.a.createElement(N.a,{variant:"rect",height:"48px",width:"48px"}))))}};t.default=function(){var e=Object(x.a)(),t=Object(E.a)(),a=Object(g.a)().t,w=Object(h.e)("normalMissions"),k=Object(r.a)(w,1)[0],S=Object(O.useState)([]),I=Object(r.a)(S,2),N=I[0],C=I[1],T=Object(O.useState)(localStorage.getItem("event-list-grid-view-type")||"grid"),B=Object(r.a)(T,1)[0],_=Object(h.j)(1),J=Object(r.a)(_,3),z=J[0],R=J[1],D=J[2],F=Object(h.j)(12),P=Object(r.a)(F,2),q=P[0],A=P[1],Q=Object(h.j)(!0),V=Object(r.a)(Q,3),H=V[1],K=V[2],L=Object(h.j)(!1),G=Object(r.a)(L,3),U=G[1],W=G[2],X=Object(O.useState)(!1),Y=Object(r.a)(X,2),Z=Y[0],$=Y[1],ee=Object(O.useReducer)(y.c,[]),te=Object(r.a)(ee,2),ae=te[0],ne=te[1],re=Object(h.j)([]),ce=Object(r.a)(re,3),ie=ce[0],oe=ce[1],le=ce[2];Object(O.useEffect)((function(){document.title=a("title:normalMissionList")}),[a]),Object(O.useEffect)((function(){if(k.length){var e=Object(n.a)(k);ae.length&&(e=e.filter((function(e){return ae.some((function(t){return e.normalMissionType.includes(t)}))}))),le(e),C([]),D(0)}}),[k,D,le,ae]),Object(O.useEffect)((function(){C((function(e){return[].concat(Object(n.a)(e),Object(n.a)(function(e,t,a){return e.slice(a*(t-1),a*t)}(ie,z,q)))})),K(!0)}),[z,q,K,ie]),Object(O.useEffect)((function(){W(Boolean(k.length))}),[W,k]);return j.a.createElement(O.Fragment,null,j.a.createElement(c.a,{variant:"h6",className:e.header},a("common:mission.main")," - ",a("common:mission.normal")),j.a.createElement(i.a,{className:e.content},j.a.createElement(o.a,{container:!0,justify:"flex-end"},j.a.createElement(l.a,{color:"primary",style:{marginBottom:"1%"}},j.a.createElement(s.a,{size:"medium",onClick:function(){return $((function(e){return!e}))}},Z?j.a.createElement(p.g,null):j.a.createElement(p.h,null),Z?j.a.createElement(f.a,null):j.a.createElement(b.a,null)))),j.a.createElement(u.a,{in:Z},j.a.createElement(m.a,{className:t.container},j.a.createElement(o.a,{container:!0,direction:"column",spacing:1},j.a.createElement(o.a,{item:!0,container:!0,xs:12,alignItems:"center",justify:"space-between"},j.a.createElement(o.a,{item:!0,xs:12,md:1},j.a.createElement(c.a,{classes:{root:t.caption}},a("filter:missionType.caption"))),j.a.createElement(o.a,{item:!0,container:!0,xs:12,md:10,spacing:1},["make","skill_level","master_rank","character_rank","set_honor","clear","read","use","buy","inherit"].map((function(e){return j.a.createElement(o.a,{key:"mission-type-"+e,item:!0},j.a.createElement(d.a,{clickable:!0,color:ae.includes(e)?"primary":"default",label:a("mission:type.".concat(e)),onClick:function(){ae.includes(e)?ne({type:"remove",payload:e}):ne({type:"add",payload:e})}}))}))))))),j.a.createElement(v.a,{ViewComponent:M[B],callback:function(e,t){U.current&&(e[0].isIntersecting&&H.current&&(!oe.current.length||oe.current.length>R.current*A.current)?(D((function(e){return e+1})),K(!1)):oe.current.length&&oe.current.length<=R.current*A.current&&t(!1))},data:N,gridSize:{grid:{xs:12,md:6},agenda:{xs:12},comfy:{xs:12}}[B]})))}}}]);
//# sourceMappingURL=46.69d1a0d7.chunk.js.map