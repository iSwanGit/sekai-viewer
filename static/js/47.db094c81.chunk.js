(this["webpackJsonpsekai-viewer"]=this["webpackJsonpsekai-viewer"]||[]).push([[47],{6022:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var r=a(35),n=a(5969),c=Object(n.a)((function(e){var t;return{header:{fontWeight:"bold"},content:{marginTop:e.spacing(3),marginBottom:e.spacing(3),marginLeft:"auto",marginRight:"auto"},alert:{margin:e.spacing(1,0)},bold:{fontWeight:e.typography.fontWeightBold},avatarProfile:(t={},Object(r.a)(t,e.breakpoints.down("sm"),{height:e.spacing(10),width:e.spacing(10)}),Object(r.a)(t,e.breakpoints.up("md"),{height:e.spacing(20),width:e.spacing(20)}),t),capitalize:{textTransform:"capitalize"}}}))},6032:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var r=a(35),n=a(5969),c=Object(n.a)((function(e){return{container:{margin:e.spacing(1,0),padding:e.spacing(1,2)},caption:Object(r.a)({},e.breakpoints.up("md"),{textAlign:"right"}),sliderContainer:Object(r.a)({},e.breakpoints.up("md"),{paddingRight:e.spacing(5)}),inputHidden:{display:"none"},noDecoration:{textDecoration:"none","&:hover":{textDecoration:"underline"},color:e.palette.text.primary}}}))},6034:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var r=a(84),n=a.n(r),c=a(100),s=a(86),u=a.n(s),o=a(0);function i(e){var t=Object(o.useMemo)((function(){var t=u.a.create({baseURL:"https://strapi.sekai.best"});return t.interceptors.request.use((function(t){return e&&(t.headers.authorization="Bearer ".concat(e)),t})),t.interceptors.response.use((function(e){return e}),(function(e){throw e.response.data.message?e.id=e.response.data.message[0].messages[0].id:e.id=e.message,e})),t}),[e]);return{postLoginLocal:Object(o.useCallback)(function(){var e=Object(c.a)(n.a.mark((function e(a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.post("/auth/local",a);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),postRegisterLocal:Object(o.useCallback)(function(){var e=Object(c.a)(n.a.mark((function e(a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.post("/auth/local/register",a);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),getRedirectConnectLoginUrl:Object(o.useCallback)((function(e){return"".concat(t.getUri({url:"".concat("https://strapi.sekai.best","/connect/").concat(e)}))}),[t]),getConnectCallback:Object(o.useCallback)(function(){var e=Object(c.a)(n.a.mark((function e(a,r){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/auth/".concat(a,"/callback").concat(r));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[t]),getUserMe:Object(o.useCallback)(function(){var e=Object(c.a)(n.a.mark((function e(a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/users/me",a?{headers:{authorization:"Bearer ".concat(a)}}:{});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),postUpload:Object(o.useCallback)(function(){var e=Object(c.a)(n.a.mark((function e(a,r){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.post("/upload",a,{headers:Object.assign({"Content-Type":"multipart/form-data"},r?{authorization:"Bearer ".concat(r)}:{})});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[t]),putUserMetadataMe:Object(o.useCallback)(function(){var e=Object(c.a)(n.a.mark((function e(a,r){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.put("/user-metadata/me",r);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[t]),postForgotPassword:Object(o.useCallback)(function(){var e=Object(c.a)(n.a.mark((function e(a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.post("/auth/forgot-password",{email:a});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),postResetPassword:Object(o.useCallback)(function(){var e=Object(c.a)(n.a.mark((function e(a,r,c){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.post("/auth/reset-password",{code:a,password:r,passwordConfirmation:c});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}(),[t]),getSekaiProfileMe:Object(o.useCallback)(function(){var e=Object(c.a)(n.a.mark((function e(a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/sekai-profiles/me",a?{headers:{authorization:"Bearer ".concat(a)}}:{});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),postSekaiProfileVerify:Object(o.useCallback)(function(){var e=Object(c.a)(n.a.mark((function e(a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.post("/sekai-profiles/verify",{userid:a});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),postSekaiProfileConfirm:Object(o.useCallback)(function(){var e=Object(c.a)(n.a.mark((function e(a,r){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.post("/sekai-profiles/".concat(a,"/confirm"),{userid:r});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[t]),putSekaiProfileUpdate:Object(o.useCallback)(function(){var e=Object(c.a)(n.a.mark((function e(a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.put("/sekai-profiles/".concat(a,"/update"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),getLanguages:Object(o.useCallback)(Object(c.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/languages");case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)}))),[t]),getUserMetadataMe:Object(o.useCallback)(function(){var e=Object(c.a)(n.a.mark((function e(a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/user-metadata/me",a?{headers:{authorization:"Bearer ".concat(a)}}:{});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),getSekaiCurrentEvent:Object(o.useCallback)(Object(c.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/sekai-current-event");case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)}))),[t]),getSekaiProfileEventRecordMe:Object(o.useCallback)(function(){var e=Object(c.a)(n.a.mark((function e(a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/sekai-profile-event-records/me",{params:a?{eventId:a}:{}});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),postSekaiProfileEventRecord:Object(o.useCallback)(function(){var e=Object(c.a)(n.a.mark((function e(a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.post("/sekai-profile-event-records/record",{eventId:a});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),getAnnouncements:Object(o.useCallback)(Object(c.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/announcements?",{params:{_sort:"isPin:DESC"}});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)}))),[t]),getAnnouncementById:Object(o.useCallback)(function(){var e=Object(c.a)(n.a.mark((function e(a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/announcements/".concat(a));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),getAnnouncementPage:Object(o.useCallback)(Object(c.a)(n.a.mark((function e(){var a,r,c=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>0&&void 0!==c[0]?c[0]:30,r=c.length>1&&void 0!==c[1]?c[1]:0,e.next=4,t.get("/announcements",{params:{_limit:a,_start:r*a,_sort:"isPin:DESC"}});case 4:return e.abrupt("return",e.sent.data);case 5:case"end":return e.stop()}}),e)}))),[t]),getAnnouncementCount:Object(o.useCallback)(Object(c.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Number,e.next=3,t.get("/announcements/count");case 3:return e.t1=e.sent.data,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)}))),[t]),getComments:Object(o.useCallback)(function(){var e=Object(c.a)(n.a.mark((function e(a,r){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/comments/".concat(a,":").concat(r));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[t]),postComment:Object(o.useCallback)(function(){var e=Object(c.a)(n.a.mark((function e(a,r,c,s){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.post("/comments/".concat(a,":").concat(r),{authorUser:c,content:s,related:[{refId:r,ref:a,field:"comments"}]});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,a,r,n){return e.apply(this,arguments)}}(),[t]),getUserInfo:Object(o.useCallback)(function(){var e=Object(c.a)(n.a.mark((function e(a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/users/".concat(a));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),patchCommentLike:Object(o.useCallback)(function(){var e=Object(c.a)(n.a.mark((function e(a,r,c){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.patch("/comments/".concat(a,":").concat(r,"/comment/").concat(c,"/like"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}(),[t]),postCommentAbuse:Object(o.useCallback)(function(){var e=Object(c.a)(n.a.mark((function e(a,r,c,s,u){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.post("/comments/".concat(a,":").concat(r,"/comment/").concat(c,"/report-abuse"),{reason:s,content:u});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,a,r,n,c){return e.apply(this,arguments)}}(),[t])}}},6767:function(e,t,a){"use strict";a.r(t);var r=a(84),n=a.n(r),c=a(100),s=a(29),u=a(47),o=a(6005),i=a(6211),p=a(6873),l=a(6010),m=a(6246),f=a(6004),b=a(5957),d=a(6247),h=a(5999),g=a(6768),w=a(6429),k=a(6141),v=a(6220),j=a(0),O=a.n(j),x=a(5933),E=a(13),y=a(50),C=a(6323),P=a.n(C),S=a(6032),A=a(6022),I=a(6034),L=a(109);t.default=function(){var e=Object(A.a)(),t=Object(S.a)(),a=Object(x.a)().t,r=Object(L.a)(),C=Object(E.g)(),U=Object(I.a)(),_=U.postRegisterLocal,B=U.getLanguages,M=Object(j.useState)(0),R=Object(s.a)(M,2),z=R[0],D=R[1],T=Object(j.useState)([]),W=Object(s.a)(T,2),q=W[0],F=W[1];Object(j.useEffect)((function(){document.title=a("title:signup")}),[a]),Object(j.useEffect)((function(){B().then((function(e){return F(e)}))}),[B]);var N=Object(j.useCallback)((function(e){var t={};return e.username||(t.username=a("auth:error.required")),e.password?e.password.length<6?t.password=a("auth:error.passwordTooShort"):z<3&&(t.password=a("auth:error.passwordStrength")):t.password=a("auth:error.required"),e.confirmPassword?e.confirmPassword!==e.password&&(t.confirmPassword=a("auth:error.confirmPasswordMismatch")):t.confirmPassword=a("auth:error.required"),e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email=a("auth:error.emailInvalid")):t.email=a("auth:error.required"),t}),[z,a]);return O.a.createElement(j.Fragment,null,O.a.createElement(u.a,{variant:"h6",className:e.header},a("common:signup")),O.a.createElement(o.a,{className:e.content,maxWidth:"md"},O.a.createElement(k.c,{initialValues:{username:"",email:"",password:"",confirmPassword:"",languages:[]},validate:N,onSubmit:function(){var e=Object(c.a)(n.a.mark((function e(t,c){var s,u;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=c.setErrors,e.prev=1,e.next=4,_(t);case 4:u=e.sent,r.user=u.user,C.push("/user/confirmation"),localStorage.setItem("lastUserCheck",String((new Date).getTime())),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),"Auth.form.error.email.taken"===e.t0.id?s({email:a("auth:error.email_taken")}):"Auth.form.error.username.taken"===e.t0.id&&s({username:a("auth:error.usernameTaken")});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a){return e.apply(this,arguments)}}()},(function(e){var r=e.submitForm,n=e.isSubmitting,c=e.dirty,s=e.isValid,o=e.values;return O.a.createElement(i.a,{container:!0,justify:"center"},O.a.createElement(i.a,{item:!0},O.a.createElement(k.b,null,O.a.createElement(k.a,{component:v.b,name:"username",type:"text",label:a("auth:signup.label.username"),InputProps:{startAdornment:O.a.createElement(p.a,{position:"start"},O.a.createElement(h.a,null))}}),O.a.createElement("br",null),O.a.createElement("br",null),O.a.createElement(k.a,{component:v.b,name:"email",type:"email",label:a("auth:signup.label.email"),InputProps:{startAdornment:O.a.createElement(p.a,{position:"start"},O.a.createElement(g.a,null))}}),O.a.createElement("br",null),O.a.createElement("br",null),O.a.createElement(k.a,{component:v.b,name:"password",type:"password",label:a("auth:signup.label.password"),InputProps:{startAdornment:O.a.createElement(p.a,{position:"start"},O.a.createElement(w.a,null))}}),O.a.createElement("br",null),O.a.createElement(P.a,{password:o.password,minLength:6,onChangeScore:function(e){return D(e)},scoreWords:[a("auth:password.too_weak"),a("auth:password.weak"),a("auth:password.okay"),a("auth:password.good"),a("auth:password.strong")],shortScoreWord:a("auth:password.too_short")}),O.a.createElement("br",null),O.a.createElement(k.a,{component:v.b,name:"confirmPassword",type:"password",label:a("auth:signup.label.confirm_password"),InputProps:{startAdornment:O.a.createElement(p.a,{position:"start"},O.a.createElement(w.a,null))}}),O.a.createElement("br",null),O.a.createElement("br",null),O.a.createElement(l.a,null,O.a.createElement(m.a,{shrink:!0,htmlFor:"language-select"},a("auth:signup.label.prefer_langs")),O.a.createElement(k.a,{component:v.a,type:"text",multiple:!0,name:"languages",inputProps:{name:"languages",id:"language-select"},style:{width:210}},q.filter((function(e){return e.enabled})).map((function(e){return O.a.createElement(f.a,{value:e.id,key:"lang-".concat(e.code)},e.name)})))),O.a.createElement("br",null),O.a.createElement("br",null),O.a.createElement(y.b,{to:"/user/login",className:t.noDecoration},O.a.createElement(u.a,{variant:"caption",color:"textPrimary"},a("auth:already-have-account"))),O.a.createElement("br",null),O.a.createElement("br",null),O.a.createElement("input",{type:"submit",style:{display:"none"}}),O.a.createElement(i.a,{container:!0,alignItems:"center",spacing:1},O.a.createElement(i.a,{item:!0},O.a.createElement(b.a,{variant:"contained",color:"primary",disabled:n||!c||!s,onClick:r},a("auth:common.signupButton")," ")),n&&O.a.createElement(i.a,{item:!0},O.a.createElement(d.a,{size:24}))))))}))))}}}]);
//# sourceMappingURL=47.db094c81.chunk.js.map