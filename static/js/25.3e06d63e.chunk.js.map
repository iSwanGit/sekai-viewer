{"version":3,"sources":["utils/index.ts","styles/layout.ts","../node_modules/@material-ui/system/esm/style.js","../node_modules/@material-ui/system/esm/compose.js","components/subs/ContentTrans.tsx","types.d.ts","styles/interactive.ts","components/subs/InfiniteScroll.tsx","../node_modules/@material-ui/system/esm/borders.js","../node_modules/@material-ui/system/esm/flexbox.js","../node_modules/@material-ui/system/esm/grid.js","../node_modules/@material-ui/system/esm/positions.js","../node_modules/@material-ui/system/esm/palette.js","../node_modules/@material-ui/system/esm/sizing.js","../node_modules/@material-ui/system/esm/typography.js","../node_modules/@material-ui/system/esm/css.js","../node_modules/@material-ui/system/esm/display.js","../node_modules/@material-ui/system/esm/shadows.js","../node_modules/@material-ui/styles/esm/styled/styled.js","../node_modules/@material-ui/core/esm/styles/styled.js","../node_modules/@material-ui/core/esm/Box/Box.js","../node_modules/@material-ui/icons/esm/ViewAgenda.js","components/music/GridView.tsx","components/music/AgendaView.tsx","components/music/MusicList.tsx"],"names":["webpMachine","WebpMachine","useRefState","initialValue","useState","state","setState","stateRef","useRef","useEffect","current","masterDataCache","useCachedData","name","cached","cachedRef","setCached","fetchCached","useCallback","a","Axios","get","window","isChinaMainland","process","data","length","then","musicTagToName","all","vocaloid","assetI18n","t","light_music_club","idol","school_refusal","theme_park","street","other","useCharaName","contentTransMode","charas","useAssetI18n","assetT","charaId","chara","find","id","firstName","givenName","includes","language","useMuisicMeta","queue","PQueue","concurrency","getRemoteAssetURL","endpoint","setFunc","isWebpSupported","Modernizr","webplossless","url","endsWith","localforage","getItem","dataUrl","responseType","res","add","decode","Uint8Array","setItem","useProcessedScenarioData","mobCharas","chara2Ds","getCharaName","scenarioPath","isCardStory","ret","characters","actions","ScenarioId","AppearCharacters","Snippets","TalkData","SpecialEffectData","SoundData","FirstBgm","FirstBackground","SnippetAction","SpecialEffect","SnippetProgressBehavior","WaitUnitilFinished","type","isWait","delay","seType","body","resource","push","Sound","SoundPlayMode","playMode","hasBgm","hasSe","bgm","se","map","ap","chara2d","ch","Character2dId","characterType","characterId","mc","snippet","action","Action","Talk","talkData","ReferenceIndex","TalkCharacters","WindowDisplayName","voiceUrl","Voices","VoiceId","startsWith","assetName","unit","ProgressBehavior","Delay","Body","voice","specialEffect","specialEffectType","SpecialEffectType","EffectType","StringVal","StringValSub","split","soundData","PlayMode","Bgm","Se","getJPTime","Date","toLocaleDateString","timeZone","slice","join","useQuery","URLSearchParams","useLocation","search","getColorArray","num","result","i","letters","color","j","Math","floor","random","useLayoutStyles","makeStyles","theme","header","fontWeight","content","marginTop","spacing","marginBottom","marginLeft","marginRight","alert","margin","bold","typography","fontWeightBold","avatarProfile","breakpoints","down","height","width","up","capitalize","textTransform","getPath","obj","path","reduce","acc","item","style","options","prop","_options$cssProperty","cssProperty","themeKey","transform","fn","props","propValue","themeMapping","handleBreakpoints","propValueFinal","value","Array","isArray","_defineProperty","propTypes","filterProps","compose","_len","arguments","styles","_key","output","merge","concat","ContentTrans","mode","contentKey","original","originalProps","translatedProps","assetTOptions","container","direction","CharaNameTrans","setChara","c","ReleaseCondTrans","releaseCondId","releaseConds","releaseCond","setReleaseCond","rc","i18nKey","releaseConditionType","Object","assign","level","releaseConditionTypeLevel","releaseConditionTypeId","rank","point","releaseConditionTypeQuantity","sentence","CharacterMissionType","useInteractiveStyles","padding","caption","textAlign","sliderContainer","paddingRight","inputHidden","display","noDecoration","textDecoration","palette","text","primary","defaultGridSize","xs","md","InfiniteScroll","ViewComponent","callback","_gridSize","gridSize","viewProps","onComponentClick","forEach","v","transformToCompleteGridSizeOptions","breakpoint","useTheme","useMediaQuery","Boolean","useBreakpoint","hasMore","setHasMore","observer","IntersectionObserver","entries","threshold","listElementRef","currentObserver","currentElement","observe","unobserve","itemsPerRow","numPlaceholders","key","sm","lg","xl","onClick","index","ref","paddingTop","from","_","getBorder","border","borderTop","borderRight","borderBottom","borderLeft","borderColor","borderRadius","borders","flexBasis","flexDirection","flexWrap","justifyContent","alignItems","alignContent","order","flex","flexGrow","flexShrink","alignSelf","justifyItems","justifySelf","flexbox","gridGap","gridColumnGap","gridRowGap","gridColumn","gridRow","gridAutoFlow","gridAutoColumns","gridAutoRows","gridTemplateColumns","gridTemplateRows","gridTemplateAreas","gridArea","grid","position","zIndex","top","right","bottom","left","bgcolor","maxWidth","minWidth","maxHeight","minHeight","sizeWidth","sizeHeight","boxSizing","sizing","fontFamily","fontSize","fontStyle","letterSpacing","lineHeight","css","styleFunction","newStyleFunction","_extends","input","fields","keys","indexOf","omit","_toConsumableArray","displayPrint","displayRaw","overflow","textOverflow","visibility","whiteSpace","boxShadow","styled","Component","undefined","stylesOptions","_objectWithoutProperties","classNamePrefix","stylesOrCreator","root","useStyles","displayName","StyledComponent","React","forwardRef","children","classNameProp","className","clone","ComponentProp","component","classes","clsx","spread","cloneElement","FinalComponent","createElement","hoistNonReactStatics","componentCreator","styledWithoutDefault","defaultTheme","positions","shadows","Box","createSvgIcon","d","media","card","cursor","GridView","useRouteMatch","useTranslation","getTranslated","useContext","SettingContext","jacket","setJacket","assetbundleName","to","Card","CardMedia","image","title","CardContent","paddingBottom","Grid","variant","Typography","categories","cat","Skeleton","agendaWrapper","agenda","agendaMedia","backgroundSize","agendaMediaSkeleton","backgroundColor","ListCard","musicDiffis","diffis","setDiffis","filter","elem","musicId","Paper","justify","Chip","size","colorPrimary","musicDifficulty","label","playLevel","MusicList","layoutClasses","interactiveClasses","musicsCache","musicTags","musics","setMusics","sortedCache","sortedCacheRef","setSortedCache","localStorage","viewGridType","setViewGridType","page","pageRef","setPage","limit","limitRef","lastQueryFinRef","setLastQueryFin","isReadyRef","setIsReady","filterOpened","setFilterOpened","sortType","setSortType","sortBy","setSortBy","musicTag","setMusicTag","document","mt","some","sort","b","getPaginatedMusics","Container","ButtonGroup","Button","ViewAgenda","Sort","SortOutlined","Collapse","in","FormControl","Select","onChange","e","target","tag","MenuItem","isIntersecting","comfy"],"mappings":"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","file":"static/js/25.3e06d63e.chunk.js","sourcesContent":["import Axios from \"axios\";\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nimport { WebpMachine } from \"webp-hero\";\nimport PQueue from \"p-queue\";\nimport localforage from \"localforage\";\nimport {\n  IGachaInfo,\n  ICardInfo,\n  IGameChara,\n  IMusicInfo,\n  ISkillInfo,\n  ICardRarity,\n  ICharacterRank,\n  IMusicVocalInfo,\n  IOutCharaProfile,\n  IUserInformationInfo,\n  IMusicDifficultyInfo,\n  IMusicTagInfo,\n  IReleaseCondition,\n  IMusicDanceMembers,\n  IEventInfo,\n  IEventDeckBonus,\n  IGameCharaUnit,\n  IResourceBoxInfo,\n  IHonorInfo,\n  ICardEpisode,\n  ContentTransModeType,\n  ITipInfo,\n  ICharaProfile,\n  ICharacter2D,\n  IMobCharacter,\n  IMusicMeta,\n  IScenarioData,\n  IUnitProfile,\n  IUnitStory,\n  SnippetAction,\n  SpecialEffectType,\n  SnippetProgressBehavior,\n  SoundPlayMode,\n  IEventStory,\n  IHonorMission,\n  IBeginnerMission,\n  ICharacterMission,\n  IHonorGroup,\n  INormalMission,\n  IEventCard,\n  IMusicAchievement,\n} from \"./../types.d\";\nimport { assetI18n, useAssetI18n } from \"./i18n\";\nimport { useLocation } from \"react-router-dom\";\n\nconst webpMachine = new WebpMachine();\n\nexport function useRefState<S>(\n  initialValue: S\n): [S, React.MutableRefObject<S>, React.Dispatch<React.SetStateAction<S>>] {\n  const [state, setState] = useState(initialValue);\n  const stateRef = useRef(state);\n  useEffect(() => {\n    stateRef.current = state;\n  }, [state]);\n  return [state, stateRef, setState];\n}\n\nlet masterDataCache: { [key: string]: any[] } = {};\n\nexport function useCachedData<\n  T extends\n    | IGachaInfo\n    | ICardInfo\n    | IGameChara\n    | IMusicInfo\n    | ISkillInfo\n    | ICardRarity\n    | ICharacterRank\n    | IMusicVocalInfo\n    | IOutCharaProfile\n    | IUserInformationInfo\n    | IMusicDifficultyInfo\n    | IMusicTagInfo\n    | IReleaseCondition\n    | IMusicDanceMembers\n    | IEventInfo\n    | IEventDeckBonus\n    | IGameCharaUnit\n    | IResourceBoxInfo\n    | IHonorInfo\n    | ICardEpisode\n    | ITipInfo\n    | ICharaProfile\n    | IUnitProfile\n    | IUnitStory\n    | IMobCharacter\n    | ICharacter2D\n    | IEventStory\n    | IHonorMission\n    | INormalMission\n    | IBeginnerMission\n    | IHonorGroup\n    | ICharacterMission\n    | IEventCard\n    | IMusicAchievement\n>(name: string): [T[], React.MutableRefObject<T[]>] {\n  const [cached, cachedRef, setCached] = useRefState<T[]>([]);\n\n  const fetchCached = useCallback(async () => {\n    const { data }: { data: T[] } = await Axios.get(\n      `${\n        window.isChinaMainland\n          ? process.env.REACT_APP_JSON_DOMAIN_CN + \"/master\"\n          : \"https://sekai-world.github.io/sekai-master-db-diff\"\n      }/${name}.json`\n    );\n    return data;\n  }, [name]);\n\n  useEffect(() => {\n    if (masterDataCache[name] && masterDataCache[name].length)\n      setCached(masterDataCache[name]);\n    else\n      fetchCached().then((data) => {\n        setCached(data);\n        masterDataCache[name] = data;\n      });\n  }, [fetchCached, name, setCached]);\n\n  return [cached, cachedRef];\n}\n\nexport const musicCategoryToName: { [key: string]: string } = {\n  mv: \"3D MV\",\n  original: \"Original MV\",\n  sekai: \"Sekai MV\",\n  image: \"Static Image\",\n  mv_2d: \"2D MV\",\n};\n\nexport const musicTagToName: { [key: string]: string } = {\n  all: \"All\",\n  vocaloid: assetI18n.t(`unit_profile:piapro.name`),\n  light_music_club: assetI18n.t(`unit_profile:light_sound.name`),\n  idol: assetI18n.t(`unit_profile:idol.name`),\n  school_refusal: assetI18n.t(`unit_profile:school_refusal.name`),\n  theme_park: assetI18n.t(`unit_profile:theme_park.name`),\n  street: assetI18n.t(`unit_profile:street.name`),\n  other: \"Other\",\n};\n\nexport function useCharaName(contentTransMode: ContentTransModeType) {\n  const [charas] = useCachedData<IGameChara>(\"gameCharacters\");\n  const { assetT, assetI18n } = useAssetI18n();\n  return useCallback(\n    (charaId: number): string | undefined => {\n      const chara = charas.find((chara) => chara.id === charaId);\n      if (chara?.firstName) {\n        switch (contentTransMode) {\n          case \"original\":\n            return `${chara.firstName} ${chara.givenName}`;\n          case \"translated\":\n            return [\"zh-CN\", \"zh-TW\", \"ko\", \"ja\"].includes(assetI18n.language)\n              ? `${assetT(\n                  `character_name:${charaId}.firstName`,\n                  chara.firstName\n                )} ${assetT(\n                  `character_name:${charaId}.givenName`,\n                  chara.givenName\n                )}`\n              : `${assetT(\n                  `character_name:${charaId}.givenName`,\n                  chara.givenName\n                )} ${assetT(\n                  `character_name:${charaId}.firstName`,\n                  chara.firstName\n                )}`;\n          case \"both\":\n            return (\n              `${chara.firstName} ${chara.givenName} | ` +\n              ([\"zh-CN\", \"zh-TW\", \"ko\", \"ja\"].includes(assetI18n.language)\n                ? `${assetT(\n                    `character_name:${charaId}.firstName`,\n                    chara.firstName\n                  )} ${assetT(\n                    `character_name:${charaId}.givenName`,\n                    chara.givenName\n                  )}`\n                : `${assetT(\n                    `character_name:${charaId}.givenName`,\n                    chara.givenName\n                  )} ${assetT(\n                    `character_name:${charaId}.firstName`,\n                    chara.firstName\n                  )}`)\n            );\n        }\n      }\n      return chara?.givenName;\n    },\n    [assetI18n.language, assetT, charas, contentTransMode]\n  );\n}\n\nexport function useMuisicMeta(): [\n  IMusicMeta[],\n  React.MutableRefObject<IMusicMeta[]>\n] {\n  const [cached, cachedRef, setCached] = useRefState<IMusicMeta[]>([]);\n\n  const fetchCached = useCallback(async () => {\n    const { data }: { data: IMusicMeta[] } = await Axios.get(\n      process.env.PUBLIC_URL + \"/metas.json\"\n    );\n    //console.log(data.length);\n    return data;\n  }, []);\n\n  useEffect(() => {\n    let name = \"metas\";\n    if (masterDataCache[name] && masterDataCache[name].length)\n      setCached(masterDataCache[name]);\n    else\n      fetchCached().then((data) => {\n        setCached(data);\n        masterDataCache[name] = data;\n      });\n  }, [fetchCached, setCached]);\n\n  return [cached, cachedRef];\n}\n\nconst queue = new PQueue({ concurrency: 1 });\n\nexport async function getRemoteAssetURL(\n  endpoint: string,\n  setFunc?: CallableFunction\n): Promise<string> {\n  const isWebpSupported = Modernizr.webplossless;\n  const url = `${process.env.REACT_APP_ASSET_DOMAIN}/file/sekai-assets/${endpoint}`;\n\n  if (endpoint.endsWith(\".webp\") && !isWebpSupported) {\n    let dataUrl = await localforage.getItem<string>(url);\n    if (!dataUrl) {\n      const res = await Axios.get(url, { responseType: \"arraybuffer\" });\n      dataUrl = await queue.add<string>(() =>\n        webpMachine.decode(new Uint8Array(res.data))\n      );\n      await localforage.setItem(url, dataUrl);\n      if (setFunc) setFunc(dataUrl);\n      return dataUrl;\n    } else {\n      if (setFunc) setFunc(dataUrl);\n      return dataUrl;\n    }\n  } else {\n    if (setFunc) setFunc(url);\n    return url;\n  }\n}\n\nexport function useProcessedScenarioData(\n  contentTransMode: ContentTransModeType\n) {\n  const [mobCharas] = useCachedData<IMobCharacter>(\"mobCharacters\");\n  const [chara2Ds] = useCachedData<ICharacter2D>(\"character2ds\");\n\n  const getCharaName = useCharaName(contentTransMode);\n\n  return useCallback(\n    async (scenarioPath: string, isCardStory: boolean) => {\n      const ret: {\n        characters: { id: number; name: string }[];\n        actions: { [key: string]: any }[];\n      } = {\n        characters: [],\n        actions: [],\n      };\n\n      if (!chara2Ds.length || !mobCharas.length || !scenarioPath) return ret;\n\n      const { data }: { data: IScenarioData } = await Axios.get(\n        await getRemoteAssetURL(scenarioPath),\n        {\n          responseType: \"json\",\n        }\n      );\n      const {\n        ScenarioId,\n        AppearCharacters,\n        Snippets,\n        TalkData,\n        // LayoutData,\n        SpecialEffectData,\n        SoundData,\n        FirstBgm,\n        FirstBackground,\n      } = data;\n\n      if (FirstBackground) {\n        ret.actions.push({\n          type: SnippetAction.SpecialEffect,\n          isWait: SnippetProgressBehavior.WaitUnitilFinished,\n          delay: 0,\n          seType: \"ChangeBackground\",\n          body: FirstBgm,\n          resource: await getRemoteAssetURL(\n            `scenario/background/${FirstBackground}_rip/${FirstBackground}.webp`\n          ),\n        });\n      }\n      if (FirstBgm) {\n        ret.actions.push({\n          type: SnippetAction.Sound,\n          isWait: SnippetProgressBehavior.WaitUnitilFinished,\n          delay: 0,\n          playMode: SoundPlayMode[0],\n          hasBgm: true,\n          hasSe: false,\n          bgm: await getRemoteAssetURL(\n            `sound/scenario/bgm/${FirstBgm}_rip/${FirstBgm}.mp3`\n          ),\n          se: \"\",\n        });\n      }\n\n      // eslint-disable-next-line array-callback-return\n      ret.characters = AppearCharacters.map((ap) => {\n        const chara2d = chara2Ds.find((ch) => ch.id === ap.Character2dId)!;\n        switch (chara2d.characterType) {\n          case \"game_character\": {\n            return {\n              id: chara2d.characterId,\n              name: getCharaName(chara2d.characterId)!,\n            };\n          }\n          case \"mob\": {\n            return {\n              id: chara2d.characterId,\n              name: mobCharas.find((mc) => mc.id === chara2d.characterId)!.name,\n            };\n          }\n        }\n      });\n\n      for (let snippet of Snippets) {\n        let action: { [key: string]: any } = {};\n        switch (snippet.Action) {\n          case SnippetAction.Talk:\n            {\n              const talkData = TalkData[snippet.ReferenceIndex];\n              // try get character\n              let chara = { id: 0, name: \"\" };\n              if (talkData.TalkCharacters[0].Character2dId) {\n                const chara2d = chara2Ds.find(\n                  (ch) => ch.id === talkData.TalkCharacters[0].Character2dId\n                )!;\n                chara.id = chara2d.characterId;\n              }\n              chara.name = talkData.WindowDisplayName;\n              let voiceUrl = talkData.Voices.length\n                ? `sound/${\n                    isCardStory ? \"card_\" : \"\"\n                  }scenario/voice/${ScenarioId}_rip/${\n                    talkData.Voices[0].VoiceId\n                  }.mp3`\n                : \"\";\n\n              if (\n                talkData.Voices.length &&\n                talkData.Voices[0].VoiceId.startsWith(\"partvoice\")\n              ) {\n                const chara2d = chara2Ds.find(\n                  (ch) => ch.id === talkData.TalkCharacters[0].Character2dId\n                )!;\n                voiceUrl = `sound/scenario/part_voice/${chara2d.assetName}_${chara2d.unit}_rip/${talkData.Voices[0].VoiceId}.mp3`;\n              }\n\n              action = {\n                type: snippet.Action,\n                isWait:\n                  snippet.ProgressBehavior ===\n                  SnippetProgressBehavior.WaitUnitilFinished,\n                delay: snippet.Delay,\n                chara,\n                body: talkData.Body,\n                voice: talkData.Voices.length\n                  ? await getRemoteAssetURL(voiceUrl)\n                  : \"\",\n              };\n            }\n            break;\n          case SnippetAction.SpecialEffect:\n            {\n              const specialEffect = SpecialEffectData[snippet.ReferenceIndex];\n              const specialEffectType =\n                SpecialEffectType[specialEffect.EffectType];\n\n              action = {\n                type: snippet.Action,\n                isWait:\n                  snippet.ProgressBehavior ===\n                  SnippetProgressBehavior.WaitUnitilFinished,\n                delay: snippet.Delay,\n                seType: specialEffectType,\n                body: specialEffect.StringVal,\n                resource:\n                  specialEffectType === \"FullScreenText\"\n                    ? await getRemoteAssetURL(\n                        `sound/scenario/voice/${ScenarioId}_rip/${specialEffect.StringValSub}.mp3`\n                      )\n                    : specialEffectType === \"ChangeBackground\"\n                    ? await getRemoteAssetURL(\n                        `scenario/background/${specialEffect.StringValSub}_rip/${specialEffect.StringValSub}.webp`\n                      )\n                    : specialEffectType === \"Movie\"\n                    ? await getRemoteAssetURL(\n                        `scenario/movie/${specialEffect.StringVal}_rip/${\n                          specialEffect.StringVal.split(\"_\")[0]\n                        }.mp4`\n                      )\n                    : \"\",\n              };\n            }\n            break;\n          case SnippetAction.Sound:\n            {\n              const soundData = SoundData[snippet.ReferenceIndex];\n\n              action = {\n                type: snippet.Action,\n                isWait:\n                  snippet.ProgressBehavior ===\n                  SnippetProgressBehavior.WaitUnitilFinished,\n                delay: snippet.Delay,\n                playMode: SoundPlayMode[soundData.PlayMode],\n                hasBgm: !!soundData.Bgm,\n                hasSe: !!soundData.Se,\n                bgm: soundData.Bgm\n                  ? await getRemoteAssetURL(\n                      `sound/scenario/bgm/${soundData.Bgm}_rip/${soundData.Bgm}.mp3`\n                    )\n                  : \"\",\n                se: soundData.Se\n                  ? await getRemoteAssetURL(\n                      `sound/scenario/se/se_pack00001_rip/${soundData.Se}.mp3`\n                    )\n                  : \"\",\n              };\n            }\n            break;\n          default: {\n            action = {\n              type: snippet.Action,\n              isWait:\n                snippet.ProgressBehavior ===\n                SnippetProgressBehavior.WaitUnitilFinished,\n              delay: snippet.Delay,\n            };\n          }\n        }\n\n        ret.actions.push(action);\n      }\n\n      return ret;\n    },\n    [chara2Ds, getCharaName, mobCharas]\n  );\n}\n\nexport function getJPTime() {\n  return new Date()\n    .toLocaleDateString(\"en-US\", { timeZone: \"Asia/Tokyo\" })\n    .split(\"/\")\n    .slice(0, 2)\n    .join(\"/\");\n}\n\nexport function useQuery() {\n  return new URLSearchParams(useLocation().search);\n}\n\nexport function getColorArray(num: number) {\n  const result = [];\n  for (let i = 0; i < num; i += 1) {\n    const letters = \"0123456789ABCDEF\".split(\"\");\n    let color = \"#\";\n    for (let j = 0; j < 6; j += 1) {\n      color += letters[Math.floor(Math.random() * 16)];\n    }\n    result.push(color);\n  }\n  return result;\n}\n","import { makeStyles } from \"@material-ui/core\";\n\nconst useLayoutStyles = makeStyles((theme) => ({\n  header: {\n    fontWeight: \"bold\",\n  },\n  content: {\n    marginTop: theme.spacing(3),\n    marginBottom: theme.spacing(3),\n    marginLeft: \"auto\",\n    marginRight: \"auto\",\n  },\n  alert: {\n    margin: theme.spacing(1, 0),\n  },\n  bold: {\n    fontWeight: theme.typography.fontWeightBold,\n  },\n  avatarProfile: {\n    [theme.breakpoints.down(\"sm\")]: {\n      height: theme.spacing(10),\n      width: theme.spacing(10),\n    },\n    [theme.breakpoints.up(\"md\")]: {\n      height: theme.spacing(20),\n      width: theme.spacing(20),\n    },\n  },\n  capitalize: {\n    textTransform: \"capitalize\",\n  },\n}));\n\nexport { useLayoutStyles };\n","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport responsivePropType from './responsivePropType';\nimport { handleBreakpoints } from './breakpoints';\n\nfunction getPath(obj, path) {\n  if (!path || typeof path !== 'string') {\n    return null;\n  }\n\n  return path.split('.').reduce(function (acc, item) {\n    return acc && acc[item] ? acc[item] : null;\n  }, obj);\n}\n\nfunction style(options) {\n  var prop = options.prop,\n      _options$cssProperty = options.cssProperty,\n      cssProperty = _options$cssProperty === void 0 ? options.prop : _options$cssProperty,\n      themeKey = options.themeKey,\n      transform = options.transform;\n\n  var fn = function fn(props) {\n    if (props[prop] == null) {\n      return null;\n    }\n\n    var propValue = props[prop];\n    var theme = props.theme;\n    var themeMapping = getPath(theme, themeKey) || {};\n\n    var styleFromPropValue = function styleFromPropValue(propValueFinal) {\n      var value;\n\n      if (typeof themeMapping === 'function') {\n        value = themeMapping(propValueFinal);\n      } else if (Array.isArray(themeMapping)) {\n        value = themeMapping[propValueFinal] || propValueFinal;\n      } else {\n        value = getPath(themeMapping, propValueFinal) || propValueFinal;\n\n        if (transform) {\n          value = transform(value);\n        }\n      }\n\n      if (cssProperty === false) {\n        return value;\n      }\n\n      return _defineProperty({}, cssProperty, value);\n    };\n\n    return handleBreakpoints(props, propValue, styleFromPropValue);\n  };\n\n  fn.propTypes = process.env.NODE_ENV !== 'production' ? _defineProperty({}, prop, responsivePropType) : {};\n  fn.filterProps = [prop];\n  return fn;\n}\n\nexport default style;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport merge from './merge';\n\nfunction compose() {\n  for (var _len = arguments.length, styles = new Array(_len), _key = 0; _key < _len; _key++) {\n    styles[_key] = arguments[_key];\n  }\n\n  var fn = function fn(props) {\n    return styles.reduce(function (acc, style) {\n      var output = style(props);\n\n      if (output) {\n        return merge(acc, output);\n      }\n\n      return acc;\n    }, {});\n  }; // Alternative approach that doesn't yield any performance gain.\n  // const handlers = styles.reduce((acc, style) => {\n  //   style.filterProps.forEach(prop => {\n  //     acc[prop] = style;\n  //   });\n  //   return acc;\n  // }, {});\n  // const fn = props => {\n  //   return Object.keys(props).reduce((acc, prop) => {\n  //     if (handlers[prop]) {\n  //       return merge(acc, handlers[prop](props));\n  //     }\n  //     return acc;\n  //   }, {});\n  // };\n\n\n  fn.propTypes = process.env.NODE_ENV !== 'production' ? styles.reduce(function (acc, style) {\n    return _extends(acc, style.propTypes);\n  }, {}) : {};\n  fn.filterProps = styles.reduce(function (acc, style) {\n    return acc.concat(style.filterProps);\n  }, []);\n  return fn;\n}\n\nexport default compose;","import { Grid, Typography, TypographyProps } from \"@material-ui/core\";\nimport { StringMap, TOptions } from \"i18next\";\nimport React, { useEffect, useState } from \"react\";\nimport {\n  ContentTransModeType,\n  IGameChara,\n  IReleaseCondition,\n} from \"../../types\";\nimport { useCachedData } from \"../../utils\";\nimport { useAssetI18n } from \"../../utils/i18n\";\n\nexport const ContentTrans: React.FC<{\n  mode: ContentTransModeType;\n  contentKey: string;\n  original: string;\n  originalProps?: TypographyProps;\n  translatedProps?: TypographyProps;\n  assetTOptions?: string | TOptions<StringMap>;\n}> = ({\n  mode,\n  contentKey,\n  original,\n  originalProps,\n  translatedProps,\n  assetTOptions,\n}) => {\n  const { assetT } = useAssetI18n();\n  switch (mode) {\n    case \"original\":\n      return <Typography {...originalProps}>{original}</Typography>;\n    case \"translated\":\n      return (\n        <Typography {...translatedProps} color=\"textPrimary\">\n          {assetT(contentKey, original, assetTOptions)}\n        </Typography>\n      );\n    case \"both\":\n      return (\n        <Grid container direction=\"column\">\n          <Typography {...originalProps} color=\"textPrimary\">\n            {original}\n          </Typography>\n          <Typography {...translatedProps} color=\"textSecondary\">\n            {assetT(contentKey, original, assetTOptions)}\n          </Typography>\n        </Grid>\n      );\n  }\n};\n\nexport const CharaNameTrans: React.FC<{\n  mode: ContentTransModeType;\n  characterId: number;\n  originalProps?: TypographyProps;\n  translatedProps?: TypographyProps;\n  assetTOptions?: string | TOptions<StringMap>;\n}> = ({ mode, characterId, originalProps, translatedProps, assetTOptions }) => {\n  const [charas] = useCachedData<IGameChara>(\"gameCharacters\");\n  const { assetT, assetI18n } = useAssetI18n();\n\n  const [chara, setChara] = useState<IGameChara>();\n\n  useEffect(() => {\n    if (charas.length) {\n      setChara(charas.find((c) => c.id === characterId));\n    }\n  }, [charas, characterId]);\n\n  if (chara) {\n    switch (mode) {\n      case \"original\":\n        return (\n          <Typography {...originalProps} color=\"textPrimary\">\n            {chara.firstName} {chara.givenName}\n          </Typography>\n        );\n      case \"translated\":\n        return [\"zh-CN\", \"zh-TW\", \"ko\", \"ja\"].includes(assetI18n.language) ? (\n          <Typography {...translatedProps} color=\"textPrimary\">\n            {chara.firstName\n              ? assetT(\n                  `character_name:${characterId}.firstName`,\n                  chara.firstName,\n                  assetTOptions\n                )\n              : \"\"}{\" \"}\n            {assetT(\n              `character_name:${characterId}.givenName`,\n              chara.givenName,\n              assetTOptions\n            )}\n          </Typography>\n        ) : (\n          <Typography>\n            {assetT(\n              `character_name:${characterId}.givenName`,\n              chara.givenName,\n              assetTOptions\n            )}{\" \"}\n            {chara.firstName\n              ? assetT(\n                  `character_name:${characterId}.firstName`,\n                  chara.firstName,\n                  assetTOptions\n                )\n              : \"\"}\n          </Typography>\n        );\n      case \"both\":\n        return (\n          <Grid container direction=\"column\">\n            <Typography {...originalProps}>\n              {chara.firstName} {chara.givenName}\n            </Typography>\n            {[\"zh-CN\", \"zh-TW\", \"ko\", \"ja\"].includes(assetI18n.language) ? (\n              <Typography color=\"textSecondary\" {...translatedProps}>\n                {chara.firstName\n                  ? assetT(\n                      `character_name:${characterId}.firstName`,\n                      chara.firstName,\n                      assetTOptions\n                    )\n                  : \"\"}{\" \"}\n                {assetT(\n                  `character_name:${characterId}.givenName`,\n                  chara.givenName,\n                  assetTOptions\n                )}\n              </Typography>\n            ) : (\n              <Typography color=\"textSecondary\" {...translatedProps}>\n                {assetT(\n                  `character_name:${characterId}.givenName`,\n                  chara.givenName,\n                  assetTOptions\n                )}{\" \"}\n                {chara.firstName\n                  ? assetT(\n                      `character_name:${characterId}.firstName`,\n                      chara.firstName,\n                      assetTOptions\n                    )\n                  : \"\"}\n              </Typography>\n            )}\n          </Grid>\n        );\n    }\n  } else {\n    return <Typography></Typography>;\n  }\n};\n\nexport const ReleaseCondTrans: React.FC<{\n  mode: ContentTransModeType;\n  releaseCondId: number;\n  originalProps?: TypographyProps;\n  translatedProps?: TypographyProps;\n  assetTOptions?: string | TOptions<StringMap>;\n}> = ({\n  mode,\n  releaseCondId,\n  originalProps,\n  translatedProps,\n  assetTOptions,\n}) => {\n  const [releaseConds] = useCachedData<IReleaseCondition>(\"releaseConditions\");\n\n  const [releaseCond, setReleaseCond] = useState<IReleaseCondition>();\n\n  useEffect(() => {\n    if (releaseConds.length) {\n      setReleaseCond(releaseConds.find((rc) => rc.id === releaseCondId));\n    }\n  }, [releaseCondId, releaseConds]);\n\n  if (releaseCond) {\n    let i18nKey = \"\";\n    switch (releaseCond.releaseConditionType) {\n      case \"none\":\n        i18nKey = `release_cond:none_${releaseCond.id}`;\n        break;\n      case \"card_level\":\n        i18nKey = `release_cond:card_level`;\n        assetTOptions = Object.assign({}, assetTOptions, {\n          level: releaseCond.releaseConditionTypeLevel,\n        });\n        break;\n      case \"unit_rank\":\n        i18nKey = `release_cond:unit_rank_${releaseCond.releaseConditionTypeId}`;\n        assetTOptions = Object.assign({}, assetTOptions, {\n          rank: releaseCond.releaseConditionTypeLevel,\n        });\n        break;\n      case \"event_point\":\n        i18nKey = `release_cond:event_point`;\n        assetTOptions = Object.assign({}, assetTOptions, {\n          point: releaseCond.releaseConditionTypeQuantity,\n        });\n        break;\n      default:\n        i18nKey = `release_cond:${releaseCond.releaseConditionType}`;\n        break;\n    }\n    return (\n      <ContentTrans\n        mode={mode}\n        contentKey={i18nKey}\n        original={releaseCond.sentence}\n        originalProps={originalProps}\n        translatedProps={translatedProps}\n        assetTOptions={assetTOptions}\n      />\n    );\n  } else {\n    return <div></div>;\n  }\n};\n","export type ContentTransModeType = \"original\" | \"translated\" | \"both\";\nexport type DisplayModeType = \"dark\" | \"light\" | \"auto\";\n\nexport interface GachaDetail {\n  id: number;\n  gachaId: number;\n  cardId: number;\n  weight: number;\n}\n\nexport interface GachaBehavior {\n  id: number;\n  gachaId: number;\n  gachaBehaviorType: string;\n  costResourceType: string;\n  costResourceQuantity: number;\n  spinCount: number;\n  spinLimit: number;\n}\n\nexport interface GachaPickup {\n  id: number;\n  gachaId: number;\n  cardId: number;\n  gachaPickupType: string;\n}\n\nexport interface GachaInformation {\n  gachaId: number;\n  summary: string;\n  description: string;\n}\n\nexport interface IGachaInfo {\n  id: number;\n  gachaType: string;\n  name: string;\n  seq: number;\n  assetbundleName: string;\n  rarity1Rate: number;\n  rarity2Rate: number;\n  rarity3Rate: number;\n  rarity4Rate: number;\n  startAt: number;\n  endAt: number;\n  gachaDetails: GachaDetail[];\n  gachaBehaviors: GachaBehavior[];\n  gachaPickups: GachaPickup[];\n  gachaPickupCostumes: any[];\n  gachaInformation: GachaInformation;\n}\n\nexport interface Cost {\n  resourceId: number;\n  resourceType: string;\n  resourceLevel?: number;\n  quantity: number;\n}\n\nexport interface ICardInfo {\n  id: number;\n  seq: number;\n  characterId: number;\n  rarity: number;\n  specialTrainingPower1BonusFixed: number;\n  specialTrainingPower2BonusFixed: number;\n  specialTrainingPower3BonusFixed: number;\n  attr: string;\n  supportUnit: string;\n  skillId: number;\n  cardSkillName: string;\n  prefix: string;\n  assetbundleName: string;\n  gachaPhrase: string;\n  flavorText: string;\n  releaseAt: number;\n  cardParameters: {\n    id: number;\n    cardId: number;\n    cardLevel: number;\n    cardParameterType: string;\n    power: number;\n  }[];\n  specialTrainingCosts: {\n    cardId: number;\n    seq: number;\n    cost: Cost;\n  }[];\n  masterLessonAchieveResources: {\n    releaseConditionId: number;\n    cardId: number;\n    masterRank: number;\n    resources: {}[];\n  }[];\n}\n\nexport interface IGameChara {\n  id: number;\n  seq: number;\n  resourceId: number;\n  firstName: string;\n  givenName: string;\n  firstNameRuby: string;\n  givenNameRuby: string;\n  gender: string;\n  height: number;\n  live2dHeightAdjustment: number;\n  figure: string;\n  breastSize: string;\n  modelName: string;\n  unit: string;\n  supportUnitType: string;\n}\n\nexport interface GachaStatistic {\n  total: number;\n  rarity1: number;\n  rarity2: number;\n  rarity3: number;\n  rarity4: number;\n}\n\nexport interface IMusicInfo {\n  id: number;\n  seq: number;\n  releaseConditionId: number;\n  categories: string[];\n  title: string;\n  lyricist: string;\n  composer: string;\n  arranger: string;\n  dancerCount: number;\n  selfDancerPosition: number;\n  assetbundleName: string;\n  liveTalkBackgroundAssetbundleName: string;\n  publishedAt: number;\n  liveStageId: number;\n  fillerSec: number;\n}\n\nexport interface IMusicAchievement {\n  id: number;\n  musicAchievementType: string;\n  musicAchievementTypeValue: string;\n  resourceBoxId: number;\n  musicDifficultyType: string;\n}\n\nexport interface SkillEffectDetail {\n  id: number;\n  level: number;\n  activateEffectDuration: number;\n  activateEffectValueType: string;\n  activateEffectValue: number;\n}\n\nexport interface SkillEffect {\n  id: number;\n  skillEffectType: string;\n  activateNotesJudgmentType: string;\n  skillEffectDetails: SkillEffectDetail[];\n}\n\nexport interface ISkillInfo {\n  id: number;\n  shortDescription: string;\n  description: string;\n  descriptionSpriteName: string;\n  skillEffects: SkillEffect[];\n}\n\nexport interface ICardRarity {\n  rarity: number;\n  maxLevel: number;\n  maxSkillLevel: number;\n  trainingMaxLevel?: number;\n}\n\nexport interface CharacterRankAchieveResource {\n  releaseConditionId: number;\n  characterId: number;\n  characterRank: number;\n  resources: any[];\n}\n\nexport interface ICharacterRank {\n  id: number;\n  characterId: number;\n  characterRank: number;\n  power1BonusRate: number;\n  power2BonusRate: number;\n  power3BonusRate: number;\n  rewardResourceBoxIds: number[];\n  characterRankAchieveResources: CharacterRankAchieveResource[];\n}\n\nexport interface Character {\n  id: number;\n  musicId: number;\n  musicVocalId: number;\n  characterType: string;\n  characterId: number;\n  seq: number;\n}\n\nexport interface IMusicVocalInfo {\n  id: number;\n  musicId: number;\n  musicVocalType: string;\n  seq: number;\n  releaseConditionId: number;\n  caption: string;\n  characters: Character[];\n  assetbundleName: string;\n}\n\nexport interface IOutCharaProfile {\n  id: number;\n  seq: number;\n  name: string;\n}\n\nexport interface IUserInformationInfo {\n  id: number;\n  seq: number;\n  informationType: string;\n  informationTag: string;\n  browseType: string;\n  platform: string;\n  title: string;\n  path: string;\n  startAt: number;\n  endAt: number;\n}\n\nexport interface IMusicDifficultyInfo {\n  id: number;\n  musicId: number;\n  musicDifficulty: string;\n  playLevel: number;\n  releaseConditionId: number;\n  noteCount: number;\n}\n\nexport interface IMusicTagInfo {\n  id: number;\n  musicId: number;\n  musicTag: string;\n  seq: number;\n}\n\nexport interface IReleaseCondition {\n  id: number;\n  sentence: string;\n  releaseConditionType: string;\n  releaseConditionTypeId?: number;\n  releaseConditionTypeLevel?: number;\n  releaseConditionTypeQuantity?: number;\n}\n\nexport interface IMusicDanceMembers {\n  id: number;\n  musicId: number;\n  defaultMusicType: string;\n  characterId1: number;\n  unit1: string;\n  characterId2?: number;\n  unit2: string;\n  characterId3?: number;\n  unit3: string;\n  characterId4?: number;\n  unit4: string;\n  characterId5?: number;\n  unit5: string;\n}\n\nexport interface EventRankingReward {\n  id: number;\n  eventRankingRewardRangeId: number;\n  resourceBoxId: number;\n}\n\nexport interface EventRankingRewardRange {\n  id: number;\n  eventId: number;\n  fromRank: number;\n  toRank: number;\n  eventRankingRewards: EventRankingReward[];\n}\n\nexport interface IEventInfo {\n  id: number;\n  eventType: string;\n  name: string;\n  assetbundleName: string;\n  bgmAssetbundleName: string;\n  startAt: number;\n  aggregateAt: number;\n  rankingAnnounceAt: number;\n  distributionStartAt: number;\n  closedAt: number;\n  distributionEndAt: number;\n  virtualLiveId: number;\n  eventRankingRewardRanges: EventRankingRewardRange[];\n}\n\nexport interface IEventDeckBonus {\n  id: number;\n  eventId: number;\n  gameCharacterUnitId: number;\n  cardAttr: string;\n  bonusRate: number;\n}\n\nexport interface IGameCharaUnit {\n  id: number;\n  gameCharacterId: number;\n  unit: string;\n  colorCode: string;\n  skinColorCode: string;\n  skinShadowColorCode1: string;\n  skinShadowColorCode2: string;\n}\n\nexport interface UserCard {\n  cardId: number;\n  level: number;\n  masterRank: number;\n  specialTrainingStatus: string;\n  defaultImage: string;\n}\n\nexport interface UserProfile {\n  userId: any;\n  word: string;\n  honorId1?: number;\n  honorLevel1?: number;\n  honorId2?: number;\n  honorLevel2?: number;\n  honorId3?: number;\n  honorLevel3?: number;\n  twitterId: string;\n  profileImageType: string;\n  userVirtualLiveTop10Rankings: any[];\n}\n\nexport interface UserRanking {\n  userId: any;\n  score: number;\n  rank: number;\n  isOwn: boolean;\n  name: string;\n  userCard: UserCard;\n  userProfile: UserProfile;\n}\n\nexport interface IEventRealtimeRank {\n  time: number;\n  first10: UserRanking[];\n  rank20: UserRanking[];\n  rank30: UserRanking[];\n  rank40: UserRanking[];\n  rank50: UserRanking[];\n  rank100: UserRanking[];\n  rank200: UserRanking[];\n  rank300: UserRanking[];\n  rank400: UserRanking[];\n  rank500: UserRanking[];\n  rank1000: UserRanking[];\n  rank2000: UserRanking[];\n  rank3000: UserRanking[];\n  rank4000: UserRanking[];\n  rank5000: UserRanking[];\n  rank10000: UserRanking[];\n  rank20000: UserRanking[];\n  rank30000: UserRanking[];\n  rank40000: UserRanking[];\n  rank50000: UserRanking[];\n  rank100000: UserRanking[];\n}\n\nexport interface ResourceBoxDetail {\n  resourceBoxPurpose: string;\n  resourceBoxId: number;\n  seq: number;\n  resourceType: string;\n  resourceQuantity: number;\n  resourceId?: number;\n  resourceLevel?: number;\n}\n\nexport interface IResourceBoxInfo {\n  resourceBoxPurpose: string;\n  id: number;\n  resourceBoxType: string;\n  details: ResourceBoxDetail[];\n  description: string;\n  name: string;\n  assetbundleName: string;\n}\n\nexport interface HonorLevel {\n  honorId: number;\n  level: number;\n  bonus: number;\n  description: string;\n}\n\nexport interface IHonorInfo {\n  id: number;\n  seq: number;\n  groupId: number;\n  honorRarity: string;\n  name: string;\n  assetbundleName: string;\n  levels: HonorLevel[];\n}\n\nexport interface ICardEpisode {\n  id: number;\n  seq: number;\n  cardId: number;\n  title: string;\n  scenarioId: string;\n  assetbundleName: string;\n  releaseConditionId: number;\n  power1BonusFixed: number;\n  power2BonusFixed: number;\n  power3BonusFixed: number;\n  rewardResourceBoxIds: number[];\n  costs: Cost[];\n  cardEpisodePartType: string;\n}\n\nexport interface IStampInfo {\n  id: number;\n  stampType: string;\n  seq: number;\n  name: string;\n  assetbundleName: string;\n  balloonAssetbundleName: string;\n  characterId1: number;\n}\n\nexport interface ITipInfoComic {\n  id: number;\n  title: string;\n  fromUserRank: number;\n  toUserRank: number;\n  assetbundleName: string;\n}\n\nexport interface ITipInfoText {\n  id: number;\n  title: string;\n  fromUserRank: number;\n  toUserRank: number;\n  description: string;\n}\n\nexport type ITipInfo = ITipInfoText | ITipInfoComic;\n\nexport interface ICharaUnitInfo {\n  id: number;\n  gameCharacterId: number;\n  unit: string;\n  colorCode: string;\n  skinColorCode: string;\n  skinShadowColorCode1: string;\n  skinShadowColorCode2: string;\n}\n\nexport interface ICharaProfile {\n  characterId: number;\n  characterVoice: string;\n  birthday: string;\n  height: string;\n  school: string;\n  schoolYear: string;\n  hobby: string;\n  specialSkill: string;\n  favoriteFood: string;\n  hatedFood: string;\n  weak: string;\n  introduction: string;\n  scenarioId: string;\n}\n\nexport interface IUnitProfile {\n  unit: string;\n  unitName: string;\n  seq: number;\n  profileSentence: string;\n  colorCode: string;\n}\n\nexport interface ITeamCardState {\n  cardId: number;\n  level: number;\n  skillLevel: number;\n}\n\nexport interface ITeamBuild {\n  teamCards: number[];\n  teamCardsStates: ITeamCardState[];\n  teamPowerStates: number;\n}\n\nexport interface IMusicMeta {\n  music_id: number;\n  difficulty: string;\n  level: number;\n  combo: number;\n  music_time: number;\n  event_rate: number;\n  base_score: number;\n  skill_score_solo: number[];\n  skill_score_multi: number[];\n  fever_score: number;\n}\n\nexport interface IMusicRecommendResult {\n  id: number;\n  name: string;\n  difficulty: string;\n  level: number;\n  combo: number;\n  result: number;\n  link: string;\n}\n\nexport interface IUnitStoryEpisode {\n  id: number;\n  unit: string;\n  chapterNo: number;\n  episodeNo: number;\n  unitEpisodeCategory: string;\n  episodeNoLabel: string;\n  title: string;\n  assetbundleName: string;\n  scenarioId: string;\n  releaseConditionId: number;\n  rewardResourceBoxIds: number[];\n  andReleaseConditionId?: number;\n}\n\nexport interface IUnitStoryChapter {\n  id: number;\n  unit: string;\n  chapterNo: number;\n  title: string;\n  assetbundleName: string;\n  episodes: IUnitStoryEpisode[];\n}\n\nexport interface IUnitStory {\n  unit: string;\n  seq: number;\n  assetbundleName: string;\n  chapters: IUnitStoryChapter[];\n}\n\nexport interface AppearCharacter {\n  Character2dId: number;\n  CostumeType: string;\n}\n\nexport enum SnippetAction {\n  None = 0,\n  Talk = 1,\n  CharacerLayout = 2,\n  InputName = 3,\n  CharacterMotion = 4,\n  Selectable = 5,\n  SpecialEffect = 6,\n  Sound = 7,\n}\n\nexport enum SnippetProgressBehavior {\n  Now = 0,\n  WaitUnitilFinished = 1,\n}\n\nexport interface Snippet {\n  Action: SnippetAction;\n  ProgressBehavior: SnippetProgressBehavior;\n  ReferenceIndex: number;\n  Delay: number;\n}\n\nexport interface TalkCharacter {\n  Character2dId: number;\n}\n\nexport interface Motion {\n  Character2dId: number;\n  MotionName: string;\n  FacialName: string;\n  TimingSyncValue: number;\n}\n\nexport interface Voice {\n  Character2dId: number;\n  VoiceId: string;\n  Volume: number;\n}\n\nexport interface TalkData {\n  TalkCharacters: TalkCharacter[];\n  WindowDisplayName: string;\n  Body: string;\n  TalkTention: number;\n  LipSync: number;\n  MotionChangeFrom: number;\n  Motions: Motion[];\n  Voices: Voice[];\n  Speed: number;\n  FontSize: number;\n  WhenFinishCloseWindow: number;\n  RequirePlayEffect: number;\n  EffectReferenceIdx: number;\n  RequirePlaySound: number;\n  SoundReferenceIdx: number;\n}\n\nexport interface LayoutData {\n  Type: number;\n  SideFrom: number;\n  SideFromOffsetX: number;\n  SideTo: number;\n  SideToOffsetX: number;\n  DepthType: number;\n  Character2dId: number;\n  CostumeType: string;\n  MotionName: string;\n  FacialName: string;\n  MoveSpeedType: number;\n}\n\nexport enum SpecialEffectType {\n  None = 0,\n  BlackIn = 1,\n  BlackOut = 2,\n  WhiteIn = 3,\n  WhiteOut = 4,\n  ShakeScreen = 5,\n  ShakeWindow = 6,\n  ChangeBackground = 7,\n  Telop = 8,\n  FlashbackIn = 9,\n  FlashbackOut = 10,\n  ChangeCardStill = 11,\n  AmbientColorNormal = 12,\n  AmbientColorEvening = 13,\n  AmbientColorNight = 14,\n  PlayScenarioEffect = 15,\n  StopScenarioEffect = 16,\n  ChangeBackgroundStill = 17,\n  PlaceInfo = 18,\n  Movie = 19,\n  SekaiIn = 20,\n  SekaiOut = 21,\n  AttachCharacterShader = 22,\n  SimpleSelectable = 23,\n  FullScreenText = 24,\n  StopShakeScreen = 25,\n  StopShakeWindow = 26,\n}\n\nexport interface SpecialEffectData {\n  EffectType: SpecialEffectType;\n  StringVal: string;\n  StringValSub: string;\n  Duration: number;\n  IntVal: number;\n}\n\nexport enum SoundPlayMode {\n  CrossFade = 0,\n  Stack = 1,\n  SpecialSePlay = 2,\n  Stop = 3,\n}\n\nexport interface SoundData {\n  PlayMode: SoundPlayMode;\n  Bgm: string;\n  Se: string;\n  Volume: number;\n  SeBundleName: string;\n  Duration: number;\n}\n\nexport interface IScenarioData {\n  ScenarioId: string;\n  AppearCharacters: AppearCharacter[];\n  FirstLayout: any[];\n  FirstBgm: string;\n  FirstBackground: string;\n  Snippets: Snippet[];\n  TalkData: TalkData[];\n  LayoutData: LayoutData[];\n  SpecialEffectData: SpecialEffectData[];\n  SoundData: SoundData[];\n  NeedBundleNames: string[];\n  IncludeSoundDataBundleNames: any[];\n}\n\nexport interface IEpisodeCharacter {\n  id: number;\n  seq: number;\n  character2dId: number;\n  storyType: string;\n  episodeId: number;\n}\n\nexport interface ICharacter2D {\n  id: number;\n  characterType: \"game_character\" | \"mob\";\n  characterId: number;\n  unit: string;\n  assetName: string;\n}\n\nexport interface IMobCharacter {\n  id: number;\n  seq: number;\n  name: string;\n  gender: string;\n}\n\nexport interface EventStoryEpisodeReward {\n  resourceBoxId: number;\n}\n\nexport interface EventStoryEpisode {\n  id: number;\n  eventStoryId: number;\n  episodeNo: number;\n  title: string;\n  assetbundleName: string;\n  scenarioId: string;\n  releaseConditionId: number;\n  episodeRewards: EventStoryEpisodeReward[];\n}\n\nexport interface IEventStory {\n  id: number;\n  eventId: number;\n  assetbundleName: string;\n  eventStoryEpisodes: EventStoryEpisode[];\n}\n\nexport interface MissionReward {\n  id: number;\n  missionType: string;\n  missionId: number;\n  seq: number;\n  resourceBoxId: number;\n}\n\nexport interface IHonorMission {\n  id: number;\n  seq: number;\n  honorMissionType: string;\n  requirement: number;\n  sentence: string;\n  rewards: MissionReward[];\n}\n\nexport interface INormalMission {\n  id: number;\n  seq: number;\n  normalMissionType: string;\n  requirement: number;\n  sentence: string;\n  rewards: MissionReward[];\n}\n\nexport interface IBeginnerMission {\n  id: number;\n  seq: number;\n  beginnerMissionType: string;\n  beginnerMissionCategory: string;\n  requirement: number;\n  sentence: string;\n  rewards: MissionReward[];\n}\n\nexport interface IHonorGroup {\n  id: number;\n  honorType: string;\n  name: string;\n}\n\nexport enum CharacterMissionType {\n  PLAY_LIVE = \"play_live\",\n  // COLLECT_CARD = \"collect_card\",\n  WAITING_ROOM = \"waiting_room\",\n  COLLECT_COSTUME_3D = \"collect_costume_3d\",\n  // LIVE_CLEAR = \"live_clear\",\n  COLLECT_STAMP = \"collect_stamp\",\n  READ_AREA_TALK = \"read_area_talk\",\n  // SKILL_EXP = \"skill_exp\",\n  MASTER_RANK = \"master_rank\",\n  // READ_EPISODE = \"read_episode\",\n  READ_CARD_EPISODE_FIRST = \"read_card_episode_first\",\n  READ_CARD_EPISODE_SECOND = \"read_card_episode_second\",\n}\n\nexport interface ICharacterMission {\n  id: number;\n  seq: number;\n  characterId: number;\n  characterMissionType: CharacterMissionType;\n  requirement: number;\n  sentence: string;\n}\n\nexport interface UserGamedata {\n  userId: number;\n  name: string;\n  deck: number;\n  rank: number;\n}\n\nexport interface User {\n  userGamedata: UserGamedata;\n}\n\nexport interface UserProfile {\n  userId: number;\n  word: string;\n  honorId1: number;\n  honorLevel1: number;\n  honorId2: number;\n  honorLevel2: number;\n  honorId3: number;\n  honorLevel3: number;\n  twitterId: string;\n  profileImageType: string;\n}\n\nexport interface UserDeck {\n  leader: number;\n  member1: number;\n  member2: number;\n  member3: number;\n  member4: number;\n  member5: number;\n}\n\nexport interface UserCardEpisode {\n  cardEpisodeId: number;\n  scenarioStatus: string;\n  scenarioStatusReasons: string[];\n  isNotSkipped: boolean;\n}\n\nexport interface UserCard {\n  cardId: number;\n  level: number;\n  masterRank: number;\n  specialTrainingStatus: string;\n  defaultImage: string;\n  episodes: UserCardEpisode[];\n}\n\nexport interface UserMusicResult {\n  userId: number;\n  musicId: number;\n  musicDifficulty: string;\n  playType: string;\n  playResult: string;\n  highScore: number;\n  fullComboFlg: boolean;\n  fullPerfectFlg: boolean;\n  mvpCount: number;\n  superStarCount: number;\n  createdAt: number;\n  updatedAt: number;\n}\n\nexport interface UserMusicDifficultyStatus {\n  musicId: number;\n  musicDifficulty: string;\n  musicDifficultyStatus: string;\n  userMusicResults: UserMusicResult[];\n}\n\nexport interface UserMusic {\n  userId: number;\n  musicId: number;\n  userMusicDifficultyStatuses: UserMusicDifficultyStatus[];\n}\n\nexport interface UserCharacter {\n  characterId: number;\n  characterRank: number;\n}\n\nexport interface UserChallengeLiveSoloResult {\n  characterId: number;\n  highScore: number;\n}\n\nexport interface UserChallengeLiveSoloStage {\n  challengeLiveStageType: string;\n  characterId: number;\n  challengeLiveStageId: number;\n  rank: number;\n}\n\nexport interface UserAreaItem {\n  areaItemId: number;\n  level: number;\n}\n\nexport interface UserHonor {\n  userId: number;\n  honorId: number;\n  level: number;\n  obtainedAt: number;\n}\n\nexport interface IUserProfile {\n  user: User;\n  userProfile: UserProfile;\n  userDecks: UserDeck[];\n  userCards: UserCard[];\n  userMusics: UserMusic[];\n  userCharacters: UserCharacter[];\n  userChallengeLiveSoloResults: UserChallengeLiveSoloResult[];\n  userChallengeLiveSoloStages: UserChallengeLiveSoloStage[];\n  userAreaItems: UserAreaItem[];\n  userHonors: UserHonor[];\n}\n\nexport type EventGraphRanking =\n  | 1\n  | 2\n  | 3\n  | 4\n  | 5\n  | 6\n  | 7\n  | 8\n  | 9\n  | 10\n  | 20\n  | 30\n  | 40\n  | 50\n  | 100\n  | 200\n  | 300\n  | 400\n  | 500\n  | 1000\n  | 2000\n  | 3000\n  | 4000\n  | 5000\n  | 10000\n  | 20000\n  | 30000\n  | 40000\n  | 50000\n  | 100000;\nexport interface EventRankingResponse {\n  id: number;\n  eventId: number;\n  timestamp: string;\n  rank: number;\n  score: number;\n  userId: string;\n  userName: string;\n  userCard?: UserCard;\n  userProfile?: UserProfile;\n}\n\nexport interface IEventCard {\n  id: number;\n  cardId: number;\n  eventId: number;\n}\n","import { makeStyles } from \"@material-ui/core\";\n\nconst useInteractiveStyles = makeStyles((theme) => ({\n  container: {\n    margin: theme.spacing(1, 0),\n    padding: theme.spacing(1, 2),\n  },\n  caption: {\n    [theme.breakpoints.up(\"md\")]: {\n      textAlign: \"right\",\n    },\n  },\n  sliderContainer: {\n    [theme.breakpoints.up(\"md\")]: {\n      paddingRight: theme.spacing(5),\n    },\n  },\n  inputHidden: {\n    display: \"none\",\n  },\n  noDecoration: {\n    textDecoration: \"none\",\n    \"&:hover\": {\n      textDecoration: \"underline\",\n    },\n    color: theme.palette.text.primary,\n  },\n}));\n\nexport { useInteractiveStyles };\n","import {\n  // Box,\n  Grid,\n  // makeStyles,\n  useMediaQuery,\n  useTheme,\n} from \"@material-ui/core\";\nimport React, { Fragment, useEffect, useRef, useState } from \"react\";\n\n// only divisor of 12\ntype GridSize = 1 | 2 | 3 | 4 | 6 | 12 | undefined;\n\ninterface GridSizeOptions {\n  /**\n   * grid size for `xs` and wider (if not overridden) \\\n   * omit this property or set `undefined` to use default (12)\n   */\n  xs?: GridSize;\n  /**\n   * grid size for `sm` and wider (if not overridden) \\\n   * omit this property or set `undefined` to inherit from `xs` \\\n   */\n  sm?: GridSize;\n  /**\n   * grid size for `md` and wider (if not overridden) \\\n   * omit this property or set `undefined` to inherit from `sm` \\\n   */\n  md?: GridSize;\n  /**\n   * grid size for `lg` and wider (if not overridden) \\\n   * omit this property or set `undefined` to inherit from `md` \\\n   */\n  lg?: GridSize;\n  /**\n   * grid size for `xl` and wider \\\n   * omit this property or set `undefined` to inherit from `lg` \\\n   */\n  xl?: GridSize;\n}\n\ntype CompleteGridSizeOptions = {\n  [T in keyof Required<GridSizeOptions>]: Exclude<GridSize, undefined>;\n};\n\ninterface IISProps<T> {\n  readonly ViewComponent: React.FC<\n    { data?: T; index?: number } & { [key: string]: any }\n  >;\n  readonly callback: (\n    entries: readonly IntersectionObserverEntry[],\n    setHasMore: React.Dispatch<React.SetStateAction<boolean>>\n  ) => void;\n  readonly data: readonly T[];\n  readonly gridSize?: Readonly<GridSizeOptions>;\n  readonly viewProps?: { [key: string]: any };\n  readonly onComponentClick?: (data: T) => void;\n}\n\n// NOTE: `breakpoints` must be sorted ascending by size\nconst breakpoints = [\"xs\", \"sm\", \"md\", \"lg\", \"xl\"] as const;\n\nconst defaultXSGridSize: GridSize = 12;\nconst defaultGridSize: Readonly<GridSizeOptions> = {\n  xs: defaultXSGridSize,\n  md: 4,\n};\n\nfunction useBreakpoint(): keyof GridSizeOptions {\n  const theme = useTheme();\n\n  // NOTE: The number of calls to `useMediaQuery` must always be constant.\n  // https://en.reactjs.org/docs/hooks-rules.html#only-call-hooks-at-the-top-level\n  const downBreakpoints = breakpoints.map(\n    (breakpoint) =>\n      // NOTE: `down` includes itself\n      // eslint-disable-next-line react-hooks/rules-of-hooks\n      useMediaQuery(theme.breakpoints.down(breakpoint)) && breakpoint\n  );\n\n  // NOTE: `down('xl')` always returns `true` so `|| breakpoints[breakpoints.length - 1]`\n  //       is not actually needed, but it's written for clarity and typing.\n  return downBreakpoints.find(Boolean) || breakpoints[breakpoints.length - 1];\n}\n\nfunction transformToCompleteGridSizeOptions(\n  _gridSize?: Readonly<GridSizeOptions> | undefined\n): CompleteGridSizeOptions {\n  // use default if gridSize is not provided\n  // not using defaults per properties because `{ md: 4 }` would not be desired\n  const gridSize = {\n    ...(_gridSize || defaultGridSize),\n  };\n\n  // inherit the value of the smaller breakpoint if not specified\n  breakpoints.forEach((v, i, a) => {\n    if (!gridSize[v]) {\n      gridSize[v] = i > 0 ? gridSize[a[i - 1]] : defaultXSGridSize;\n    }\n  });\n\n  return gridSize as CompleteGridSizeOptions;\n}\n\nfunction InfiniteScroll<T>({\n  ViewComponent,\n  callback,\n  data,\n  gridSize: _gridSize,\n  viewProps,\n  onComponentClick,\n}: React.PropsWithChildren<IISProps<T & { id: number }>>): React.ReactElement<\n  IISProps<T>\n> {\n  // this is necessary because of `viewGridSize`\n  const gridSize = transformToCompleteGridSizeOptions(_gridSize);\n\n  const breakpoint = useBreakpoint();\n\n  const [hasMore, setHasMore] = useState<boolean>(true);\n\n  const observer = useRef(\n    new IntersectionObserver((entries) => callback(entries, setHasMore), {\n      threshold: 0.5,\n    })\n  );\n  const listElementRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    setHasMore(true);\n  }, [data]);\n\n  useEffect(() => {\n    const currentObserver = observer.current;\n    const currentElement = listElementRef.current;\n    if (currentElement) currentObserver.observe(currentElement);\n\n    return () => {\n      if (currentElement) {\n        currentObserver.unobserve(currentElement);\n      }\n    };\n  });\n\n  const viewGridSize = gridSize[breakpoint];\n  const itemsPerRow = 12 / viewGridSize;\n  const numPlaceholders = data.length ? itemsPerRow : itemsPerRow * 2;\n\n  return (\n    <Fragment>\n      <Grid container direction=\"row\" spacing={1}>\n        {data.length\n          ? data.map((data, i) => (\n              <Grid\n                key={data.id}\n                item\n                xs={gridSize.xs}\n                sm={gridSize.sm}\n                md={gridSize.md}\n                lg={gridSize.lg}\n                xl={gridSize.xl}\n                onClick={() => {\n                  if (onComponentClick) onComponentClick(data);\n                }}\n              >\n                <ViewComponent data={data} index={i} {...viewProps} />\n              </Grid>\n            ))\n          : null}\n      </Grid>\n      <Grid\n        container\n        direction=\"row\"\n        ref={listElementRef}\n        style={{ display: hasMore ? \"flex\" : \"none\", paddingTop: \"4px\" }}\n        spacing={1}\n      >\n        {Array.from({\n          length: numPlaceholders,\n        }).map((_, i) => (\n          <Grid\n            key={`empty-${i}`}\n            item\n            xs={gridSize.xs}\n            sm={gridSize.sm}\n            md={gridSize.md}\n            lg={gridSize.lg}\n            xl={gridSize.xl}\n          >\n            <ViewComponent />\n          </Grid>\n        ))}\n      </Grid>\n    </Fragment>\n  );\n}\n\nexport default InfiniteScroll;\n","import style from './style';\nimport compose from './compose';\n\nfunction getBorder(value) {\n  if (typeof value !== 'number') {\n    return value;\n  }\n\n  return \"\".concat(value, \"px solid\");\n}\n\nexport var border = style({\n  prop: 'border',\n  themeKey: 'borders',\n  transform: getBorder\n});\nexport var borderTop = style({\n  prop: 'borderTop',\n  themeKey: 'borders',\n  transform: getBorder\n});\nexport var borderRight = style({\n  prop: 'borderRight',\n  themeKey: 'borders',\n  transform: getBorder\n});\nexport var borderBottom = style({\n  prop: 'borderBottom',\n  themeKey: 'borders',\n  transform: getBorder\n});\nexport var borderLeft = style({\n  prop: 'borderLeft',\n  themeKey: 'borders',\n  transform: getBorder\n});\nexport var borderColor = style({\n  prop: 'borderColor',\n  themeKey: 'palette'\n});\nexport var borderRadius = style({\n  prop: 'borderRadius',\n  themeKey: 'shape'\n});\nvar borders = compose(border, borderTop, borderRight, borderBottom, borderLeft, borderColor, borderRadius);\nexport default borders;","import style from './style';\nimport compose from './compose';\nexport var flexBasis = style({\n  prop: 'flexBasis'\n});\nexport var flexDirection = style({\n  prop: 'flexDirection'\n});\nexport var flexWrap = style({\n  prop: 'flexWrap'\n});\nexport var justifyContent = style({\n  prop: 'justifyContent'\n});\nexport var alignItems = style({\n  prop: 'alignItems'\n});\nexport var alignContent = style({\n  prop: 'alignContent'\n});\nexport var order = style({\n  prop: 'order'\n});\nexport var flex = style({\n  prop: 'flex'\n});\nexport var flexGrow = style({\n  prop: 'flexGrow'\n});\nexport var flexShrink = style({\n  prop: 'flexShrink'\n});\nexport var alignSelf = style({\n  prop: 'alignSelf'\n});\nexport var justifyItems = style({\n  prop: 'justifyItems'\n});\nexport var justifySelf = style({\n  prop: 'justifySelf'\n});\nvar flexbox = compose(flexBasis, flexDirection, flexWrap, justifyContent, alignItems, alignContent, order, flex, flexGrow, flexShrink, alignSelf, justifyItems, justifySelf);\nexport default flexbox;","import style from './style';\nimport compose from './compose';\nexport var gridGap = style({\n  prop: 'gridGap'\n});\nexport var gridColumnGap = style({\n  prop: 'gridColumnGap'\n});\nexport var gridRowGap = style({\n  prop: 'gridRowGap'\n});\nexport var gridColumn = style({\n  prop: 'gridColumn'\n});\nexport var gridRow = style({\n  prop: 'gridRow'\n});\nexport var gridAutoFlow = style({\n  prop: 'gridAutoFlow'\n});\nexport var gridAutoColumns = style({\n  prop: 'gridAutoColumns'\n});\nexport var gridAutoRows = style({\n  prop: 'gridAutoRows'\n});\nexport var gridTemplateColumns = style({\n  prop: 'gridTemplateColumns'\n});\nexport var gridTemplateRows = style({\n  prop: 'gridTemplateRows'\n});\nexport var gridTemplateAreas = style({\n  prop: 'gridTemplateAreas'\n});\nexport var gridArea = style({\n  prop: 'gridArea'\n});\nvar grid = compose(gridGap, gridColumnGap, gridRowGap, gridColumn, gridRow, gridAutoFlow, gridAutoColumns, gridAutoRows, gridTemplateColumns, gridTemplateRows, gridTemplateAreas, gridArea);\nexport default grid;","import style from './style';\nimport compose from './compose';\nexport var position = style({\n  prop: 'position'\n});\nexport var zIndex = style({\n  prop: 'zIndex',\n  themeKey: 'zIndex'\n});\nexport var top = style({\n  prop: 'top'\n});\nexport var right = style({\n  prop: 'right'\n});\nexport var bottom = style({\n  prop: 'bottom'\n});\nexport var left = style({\n  prop: 'left'\n});\nexport default compose(position, zIndex, top, right, bottom, left);","import style from './style';\nimport compose from './compose';\nexport var color = style({\n  prop: 'color',\n  themeKey: 'palette'\n});\nexport var bgcolor = style({\n  prop: 'bgcolor',\n  cssProperty: 'backgroundColor',\n  themeKey: 'palette'\n});\nvar palette = compose(color, bgcolor);\nexport default palette;","import style from './style';\nimport compose from './compose';\n\nfunction transform(value) {\n  return value <= 1 ? \"\".concat(value * 100, \"%\") : value;\n}\n\nexport var width = style({\n  prop: 'width',\n  transform: transform\n});\nexport var maxWidth = style({\n  prop: 'maxWidth',\n  transform: transform\n});\nexport var minWidth = style({\n  prop: 'minWidth',\n  transform: transform\n});\nexport var height = style({\n  prop: 'height',\n  transform: transform\n});\nexport var maxHeight = style({\n  prop: 'maxHeight',\n  transform: transform\n});\nexport var minHeight = style({\n  prop: 'minHeight',\n  transform: transform\n});\nexport var sizeWidth = style({\n  prop: 'size',\n  cssProperty: 'width',\n  transform: transform\n});\nexport var sizeHeight = style({\n  prop: 'size',\n  cssProperty: 'height',\n  transform: transform\n});\nexport var boxSizing = style({\n  prop: 'boxSizing'\n});\nvar sizing = compose(width, maxWidth, minWidth, height, maxHeight, minHeight, boxSizing);\nexport default sizing;","import style from './style';\nimport compose from './compose';\nexport var fontFamily = style({\n  prop: 'fontFamily',\n  themeKey: 'typography'\n});\nexport var fontSize = style({\n  prop: 'fontSize',\n  themeKey: 'typography'\n});\nexport var fontStyle = style({\n  prop: 'fontStyle',\n  themeKey: 'typography'\n});\nexport var fontWeight = style({\n  prop: 'fontWeight',\n  themeKey: 'typography'\n});\nexport var letterSpacing = style({\n  prop: 'letterSpacing'\n});\nexport var lineHeight = style({\n  prop: 'lineHeight'\n});\nexport var textAlign = style({\n  prop: 'textAlign'\n});\nvar typography = compose(fontFamily, fontSize, fontStyle, fontWeight, letterSpacing, lineHeight, textAlign);\nexport default typography;","import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport PropTypes from 'prop-types';\nimport merge from './merge';\n\nfunction omit(input, fields) {\n  var output = {};\n  Object.keys(input).forEach(function (prop) {\n    if (fields.indexOf(prop) === -1) {\n      output[prop] = input[prop];\n    }\n  });\n  return output;\n}\n\nfunction css(styleFunction) {\n  var newStyleFunction = function newStyleFunction(props) {\n    var output = styleFunction(props);\n\n    if (props.css) {\n      return _extends(_extends({}, merge(output, styleFunction(_extends({\n        theme: props.theme\n      }, props.css)))), omit(props.css, [styleFunction.filterProps]));\n    }\n\n    return output;\n  };\n\n  newStyleFunction.propTypes = process.env.NODE_ENV !== 'production' ? _extends(_extends({}, styleFunction.propTypes), {}, {\n    css: PropTypes.object\n  }) : {};\n  newStyleFunction.filterProps = ['css'].concat(_toConsumableArray(styleFunction.filterProps));\n  return newStyleFunction;\n}\n\nexport default css;","import style from './style';\nimport compose from './compose';\nexport var displayPrint = style({\n  prop: 'displayPrint',\n  cssProperty: false,\n  transform: function transform(value) {\n    return {\n      '@media print': {\n        display: value\n      }\n    };\n  }\n});\nexport var displayRaw = style({\n  prop: 'display'\n});\nexport var overflow = style({\n  prop: 'overflow'\n});\nexport var textOverflow = style({\n  prop: 'textOverflow'\n});\nexport var visibility = style({\n  prop: 'visibility'\n});\nexport var whiteSpace = style({\n  prop: 'whiteSpace'\n});\nexport default compose(displayPrint, displayRaw, overflow, textOverflow, visibility, whiteSpace);","import style from './style';\nvar boxShadow = style({\n  prop: 'boxShadow',\n  themeKey: 'shadows'\n});\nexport default boxShadow;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport React from 'react';\nimport clsx from 'clsx';\nimport PropTypes from 'prop-types';\nimport { chainPropTypes, getDisplayName } from '@material-ui/utils';\nimport hoistNonReactStatics from 'hoist-non-react-statics';\nimport makeStyles from '../makeStyles';\n\nfunction omit(input, fields) {\n  var output = {};\n  Object.keys(input).forEach(function (prop) {\n    if (fields.indexOf(prop) === -1) {\n      output[prop] = input[prop];\n    }\n  });\n  return output;\n} // styled-components's API removes the mapping between components and styles.\n// Using components as a low-level styling construct can be simpler.\n\n\nexport default function styled(Component) {\n  var componentCreator = function componentCreator(style) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    var name = options.name,\n        stylesOptions = _objectWithoutProperties(options, [\"name\"]);\n\n    if (process.env.NODE_ENV !== 'production' && Component === undefined) {\n      throw new Error(['You are calling styled(Component)(style) with an undefined component.', 'You may have forgotten to import it.'].join('\\n'));\n    }\n\n    var classNamePrefix = name;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!name) {\n        // Provide a better DX outside production.\n        var displayName = getDisplayName(Component);\n\n        if (displayName !== undefined) {\n          classNamePrefix = displayName;\n        }\n      }\n    }\n\n    var stylesOrCreator = typeof style === 'function' ? function (theme) {\n      return {\n        root: function root(props) {\n          return style(_extends({\n            theme: theme\n          }, props));\n        }\n      };\n    } : {\n      root: style\n    };\n    var useStyles = makeStyles(stylesOrCreator, _extends({\n      Component: Component,\n      name: name || Component.displayName,\n      classNamePrefix: classNamePrefix\n    }, stylesOptions));\n    var filterProps;\n    var propTypes = {};\n\n    if (style.filterProps) {\n      filterProps = style.filterProps;\n      delete style.filterProps;\n    }\n    /* eslint-disable react/forbid-foreign-prop-types */\n\n\n    if (style.propTypes) {\n      propTypes = style.propTypes;\n      delete style.propTypes;\n    }\n    /* eslint-enable react/forbid-foreign-prop-types */\n\n\n    var StyledComponent = React.forwardRef(function StyledComponent(props, ref) {\n      var children = props.children,\n          classNameProp = props.className,\n          clone = props.clone,\n          ComponentProp = props.component,\n          other = _objectWithoutProperties(props, [\"children\", \"className\", \"clone\", \"component\"]);\n\n      var classes = useStyles(props);\n      var className = clsx(classes.root, classNameProp);\n      var spread = other;\n\n      if (filterProps) {\n        spread = omit(spread, filterProps);\n      }\n\n      if (clone) {\n        return React.cloneElement(children, _extends({\n          className: clsx(children.props.className, className)\n        }, spread));\n      }\n\n      if (typeof children === 'function') {\n        return children(_extends({\n          className: className\n        }, spread));\n      }\n\n      var FinalComponent = ComponentProp || Component;\n      return /*#__PURE__*/React.createElement(FinalComponent, _extends({\n        ref: ref,\n        className: className\n      }, spread), children);\n    });\n    process.env.NODE_ENV !== \"production\" ? StyledComponent.propTypes = _extends({\n      /**\n       * A render function or node.\n       */\n      children: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n\n      /**\n       * @ignore\n       */\n      className: PropTypes.string,\n\n      /**\n       * If `true`, the component will recycle it's children HTML element.\n       * It's using `React.cloneElement` internally.\n       *\n       * This prop will be deprecated and removed in v5\n       */\n      clone: chainPropTypes(PropTypes.bool, function (props) {\n        if (props.clone && props.component) {\n          return new Error('You can not use the clone and component prop at the same time.');\n        }\n\n        return null;\n      }),\n\n      /**\n       * The component used for the root node.\n       * Either a string to use a HTML element or a component.\n       */\n      component: PropTypes.elementType\n    }, propTypes) : void 0;\n\n    if (process.env.NODE_ENV !== 'production') {\n      StyledComponent.displayName = \"Styled(\".concat(classNamePrefix, \")\");\n    }\n\n    hoistNonReactStatics(StyledComponent, Component);\n    return StyledComponent;\n  };\n\n  return componentCreator;\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { styled as styledWithoutDefault } from '@material-ui/styles';\nimport defaultTheme from './defaultTheme';\n\nvar styled = function styled(Component) {\n  var componentCreator = styledWithoutDefault(Component);\n  return function (style, options) {\n    return componentCreator(style, _extends({\n      defaultTheme: defaultTheme\n    }, options));\n  };\n};\n\nexport default styled;","import { borders, compose, display, flexbox, grid, palette, positions, shadows, sizing, spacing, typography, css } from '@material-ui/system';\nimport styled from '../styles/styled';\nexport var styleFunction = css(compose(borders, display, flexbox, grid, positions, palette, shadows, sizing, spacing, typography));\n/**\n * @ignore - do not document.\n */\n\nvar Box = styled('div')(styleFunction, {\n  name: 'MuiBox'\n});\nexport default Box;","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M20 13H3c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h17c.55 0 1-.45 1-1v-6c0-.55-.45-1-1-1zm0-10H3c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h17c.55 0 1-.45 1-1V4c0-.55-.45-1-1-1z\"\n}), 'ViewAgenda');","import {\n  Card,\n  CardContent,\n  Typography,\n  CardMedia,\n  Grid,\n  makeStyles,\n} from \"@material-ui/core\";\nimport { Skeleton } from \"@material-ui/lab\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Link, useRouteMatch } from \"react-router-dom\";\nimport { SettingContext } from \"../../context\";\nimport { IMusicInfo } from \"../../types\";\nimport { getRemoteAssetURL } from \"../../utils\";\nimport { useAssetI18n } from \"../../utils/i18n\";\nimport { ContentTrans } from \"../subs/ContentTrans\";\n\nconst useStyles = makeStyles((theme) => ({\n  media: {\n    paddingTop: \"75%\",\n  },\n  card: {\n    // margin: theme.spacing(0.5),\n    cursor: \"pointer\",\n  },\n  header: {\n    // \"white-space\": \"nowrap\",\n    // overflow: \"hidden\",\n    // \"text-overflow\": \"ellipsis\",\n  },\n}));\n\nconst GridView: React.FC<{ data?: IMusicInfo }> = ({ data }) => {\n  const classes = useStyles();\n  const { path } = useRouteMatch();\n  const { t } = useTranslation();\n  const { getTranslated } = useAssetI18n();\n  const { contentTransMode } = useContext(SettingContext)!;\n\n  const [jacket, setJacket] = useState<string>(\"\");\n\n  useEffect(() => {\n    if (data)\n      getRemoteAssetURL(\n        `music/jacket/${data.assetbundleName}_rip/${data.assetbundleName}.webp`,\n        setJacket\n      );\n  }, [data]);\n\n  if (!data) {\n    // loading\n    return (\n      <Card className={classes.card}>\n        <Skeleton variant=\"rect\" className={classes.media}></Skeleton>\n        <CardContent>\n          <Typography variant=\"subtitle1\" className={classes.header}>\n            <Skeleton variant=\"text\" width=\"90%\"></Skeleton>\n          </Typography>\n          <Typography variant=\"body2\">\n            <Skeleton variant=\"text\" width=\"40%\"></Skeleton>\n          </Typography>\n        </CardContent>\n      </Card>\n    );\n  }\n  return (\n    <Link to={path + \"/\" + data.id} style={{ textDecoration: \"none\" }}>\n      <Card className={classes.card}>\n        <CardMedia\n          className={classes.media}\n          image={jacket}\n          title={getTranslated(\n            contentTransMode,\n            `music_titles:${data.id}`,\n            data.title\n          )}\n        ></CardMedia>\n        <CardContent style={{ paddingBottom: \"16px\" }}>\n          <Grid container direction=\"column\" spacing={1}>\n            <Grid item>\n              <ContentTrans\n                mode={contentTransMode}\n                contentKey={`music_titles:${data.id}`}\n                original={data.title}\n                originalProps={{\n                  variant: \"subtitle1\",\n                  className: classes.header,\n                }}\n                translatedProps={{\n                  variant: \"subtitle1\",\n                  className: classes.header,\n                }}\n              />\n            </Grid>\n            <Grid item>\n              <Typography variant=\"body2\" color=\"textSecondary\">\n                {data.categories\n                  .map((cat) => t(`music:categoryType.${cat}`))\n                  .join(\", \")}\n              </Typography>\n            </Grid>\n          </Grid>\n        </CardContent>\n      </Card>\n    </Link>\n  );\n};\n\nexport default GridView;\n","import {\n  Typography,\n  CardMedia,\n  Grid,\n  makeStyles,\n  Paper,\n  Box,\n  Chip,\n} from \"@material-ui/core\";\nimport { Skeleton } from \"@material-ui/lab\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Link, useRouteMatch } from \"react-router-dom\";\nimport { SettingContext } from \"../../context\";\nimport { IMusicDifficultyInfo, IMusicInfo } from \"../../types\";\nimport { getRemoteAssetURL, useCachedData } from \"../../utils\";\nimport { useAssetI18n } from \"../../utils/i18n\";\nimport { ContentTrans } from \"../subs/ContentTrans\";\n\nconst useStyles = makeStyles((theme) => ({\n  media: {\n    paddingTop: \"75%\",\n  },\n  card: {\n    // margin: theme.spacing(0.5),\n    cursor: \"pointer\",\n  },\n  header: {\n    // \"white-space\": \"nowrap\",\n    // overflow: \"hidden\",\n    // \"text-overflow\": \"ellipsis\",\n  },\n  agendaWrapper: {\n    display: \"block\",\n    [theme.breakpoints.down(\"sm\")]: {\n      maxWidth: \"300px\",\n    },\n    // [theme.breakpoints.only(\"md\")]: {\n    //   maxWidth: \"600px\",\n    // },\n    maxWidth: \"70%\",\n    margin: \"auto\",\n    cursor: \"pointer\",\n  },\n  agenda: {\n    padding: \"2% 0\",\n  },\n  agendaMedia: {\n    paddingTop: \"75%\",\n    backgroundSize: \"contain\",\n  },\n  agendaMediaSkeleton: {\n    position: \"absolute\",\n    top: \"0\",\n    left: \"12.5%\",\n    width: \"75%\",\n    height: \"100%\",\n  },\n  \"diffi-easy\": {\n    backgroundColor: \"#66DD11\",\n  },\n  \"diffi-normal\": {\n    backgroundColor: \"#33BBEE\",\n  },\n  \"diffi-hard\": {\n    backgroundColor: \"#FFAA00\",\n  },\n  \"diffi-expert\": {\n    backgroundColor: \"#EE4466\",\n  },\n  \"diffi-master\": {\n    backgroundColor: \"#BB33EE\",\n  },\n}));\n\nconst AgendaView: React.FC<{ data?: IMusicInfo }> = ({ data }) => {\n  const classes = useStyles();\n  const { path } = useRouteMatch();\n  const { t } = useTranslation();\n  const { getTranslated } = useAssetI18n();\n  const { contentTransMode } = useContext(SettingContext)!;\n\n  const [musicDiffis] = useCachedData<IMusicDifficultyInfo>(\n    \"musicDifficulties\"\n  );\n\n  const [jacket, setJacket] = useState<string>(\"\");\n  const [diffis, setDiffis] = useState<IMusicDifficultyInfo[]>([]);\n\n  useEffect(() => {\n    if (data)\n      getRemoteAssetURL(\n        `music/jacket/${data.assetbundleName}_rip/${data.assetbundleName}.webp`,\n        setJacket\n      );\n  }, [data]);\n\n  useEffect(() => {\n    if (data && musicDiffis.length) {\n      setDiffis(musicDiffis.filter((elem) => elem.musicId === data.id));\n    }\n  }, [musicDiffis, data]);\n\n  if (!data) {\n    // loading\n    return (\n      <Box className={classes.agendaWrapper}>\n        <Paper className={classes.agenda}>\n          <Grid\n            container\n            alignItems=\"center\"\n            spacing={2}\n            justify=\"space-between\"\n          >\n            <Grid item xs={5} md={4}>\n              <Box\n                className={classes.agendaMedia}\n                style={{ position: \"relative\" }}\n              >\n                <Skeleton\n                  variant=\"rect\"\n                  className={classes.agendaMediaSkeleton}\n                ></Skeleton>\n              </Box>\n            </Grid>\n            <Grid item xs={6} md={7} container direction=\"column\">\n              <Grid item>\n                <Typography variant=\"body1\">\n                  <Skeleton variant=\"text\" width=\"60%\"></Skeleton>\n                </Typography>\n                <Typography color=\"textSecondary\">\n                  <Skeleton variant=\"text\" width=\"30%\"></Skeleton>\n                </Typography>\n              </Grid>\n              <Grid item container direction=\"row\" style={{ marginTop: \"5%\" }}>\n                <Skeleton variant=\"rect\" width=\"75%\" height=\"24px\"></Skeleton>\n              </Grid>\n            </Grid>\n          </Grid>\n        </Paper>\n      </Box>\n    );\n  }\n  return (\n    <Link\n      to={path + \"/\" + data.id}\n      className={classes.agendaWrapper}\n      style={{ textDecoration: \"none\" }}\n    >\n      <Paper className={classes.agenda}>\n        <Grid container alignItems=\"center\" spacing={2} justify=\"space-between\">\n          <Grid item xs={5} md={4}>\n            <CardMedia\n              className={classes.agendaMedia}\n              image={jacket}\n              title={getTranslated(\n                contentTransMode,\n                `music_titles:${data.id}`,\n                data.title\n              )}\n            ></CardMedia>\n          </Grid>\n          <Grid item xs={6} md={7}>\n            <Grid container direction=\"column\" spacing={1}>\n              <Grid item>\n                <ContentTrans\n                  mode={contentTransMode}\n                  contentKey={`music_titles:${data.id}`}\n                  original={data.title}\n                  originalProps={{\n                    variant: \"subtitle1\",\n                    className: classes.header,\n                  }}\n                  translatedProps={{\n                    variant: \"subtitle1\",\n                    className: classes.header,\n                  }}\n                />\n              </Grid>\n              <Grid item>\n                <Typography variant=\"body2\" color=\"textSecondary\">\n                  {data.categories\n                    .map((cat) => t(`music:categoryType.${cat}`))\n                    .join(\", \")}\n                </Typography>\n              </Grid>\n              <Grid item container direction=\"row\" style={{ marginTop: \"5%\" }}>\n                {diffis.map((elem) => (\n                  <Grid item xs={4} md={2} key={`diff-${elem.id}`}>\n                    <Chip\n                      color=\"primary\"\n                      size=\"small\"\n                      classes={{\n                        colorPrimary:\n                          classes[\n                            `diffi-${elem.musicDifficulty}` as\n                              | \"diffi-easy\"\n                              | \"diffi-normal\"\n                              | \"diffi-hard\"\n                              | \"diffi-expert\"\n                              | \"diffi-master\"\n                          ],\n                      }}\n                      label={elem.playLevel}\n                    ></Chip>\n                  </Grid>\n                ))}\n              </Grid>\n            </Grid>\n          </Grid>\n        </Grid>\n      </Paper>\n    </Link>\n  );\n};\n\nexport default AgendaView;\n","import {\n  Button,\n  ButtonGroup,\n  Grid,\n  Paper,\n  Typography,\n  Container,\n  Collapse,\n  FormControl,\n  MenuItem,\n  Select,\n} from \"@material-ui/core\";\nimport { useLayoutStyles } from \"../../styles/layout\";\nimport { ViewAgenda, Sort, SortOutlined } from \"@material-ui/icons\";\nimport {\n  Filter,\n  FilterOutline,\n  ViewAgendaOutline,\n  ViewGrid,\n  ViewGridOutline,\n} from \"mdi-material-ui\";\nimport React, { Fragment, useEffect, useState } from \"react\";\nimport { musicTagToName, useCachedData, useRefState } from \"../../utils\";\nimport InfiniteScroll from \"../subs/InfiniteScroll\";\n\nimport { useTranslation } from \"react-i18next\";\nimport { useInteractiveStyles } from \"../../styles/interactive\";\nimport GridView from \"./GridView\";\nimport AgendaView from \"./AgendaView\";\nimport { IMusicInfo, IMusicTagInfo } from \"../../types\";\n\ntype ViewGridType = \"grid\" | \"agenda\" | \"comfy\";\n\nfunction getPaginatedMusics(musics: IMusicInfo[], page: number, limit: number) {\n  return musics.slice(limit * (page - 1), limit * page);\n}\n\nconst ListCard: { [key: string]: React.FC<{ data?: IMusicInfo }> } = {\n  grid: GridView,\n  agenda: AgendaView,\n};\n\nconst MusicList: React.FC<{}> = () => {\n  const layoutClasses = useLayoutStyles();\n  const interactiveClasses = useInteractiveStyles();\n  const { t } = useTranslation();\n\n  const [musicsCache] = useCachedData<IMusicInfo>(\"musics\");\n  const [musicTags] = useCachedData<IMusicTagInfo>(\"musicTags\");\n\n  const [musics, setMusics] = useState<IMusicInfo[]>([]);\n  const [sortedCache, sortedCacheRef, setSortedCache] = useRefState<\n    IMusicInfo[]\n  >([]);\n  const [viewGridType, setViewGridType] = useState<ViewGridType>(\n    (localStorage.getItem(\"music-list-grid-view-type\") ||\n      \"grid\") as ViewGridType\n  );\n  const [page, pageRef, setPage] = useRefState<number>(0);\n  const [limit, limitRef] = useRefState<number>(12);\n  // const [, totalMusicsRef, setTotalMusics] = useRefState<number>(0);\n  const [, lastQueryFinRef, setLastQueryFin] = useRefState<boolean>(true);\n  const [, isReadyRef, setIsReady] = useRefState<boolean>(false);\n  const [filterOpened, setFilterOpened] = useState<boolean>(false);\n  const [sortType, setSortType] = useState<string>(\n    localStorage.getItem(\"music-list-filter-sort-type\") || \"asc\"\n  );\n  const [sortBy, setSortBy] = useState<string>(\n    localStorage.getItem(\"music-list-filter-sort-by\") || \"id\"\n  );\n  const [musicTag, setMusicTag] = useState<string>(\"all\");\n\n  useEffect(() => {\n    document.title = t(\"title:musicList\");\n  }, [t]);\n\n  useEffect(() => {\n    setIsReady(Boolean(musicsCache.length));\n  }, [setIsReady, musicsCache]);\n\n  useEffect(() => {\n    if (musicsCache.length && musicTags.length) {\n      let result = [...musicsCache];\n      // do filter\n      if (musicTag) {\n        result = result.filter((c) =>\n          musicTags\n            .filter((mt) => mt.musicId === c.id)!\n            .some((mt) => musicTag === mt.musicTag)\n        );\n      }\n      // sort musics cache\n      switch (sortBy) {\n        case \"id\":\n        case \"publishedAt\":\n          result = result.sort((a, b) =>\n            sortType === \"asc\" ? a[sortBy] - b[sortBy] : b[sortBy] - a[sortBy]\n          );\n          break;\n      }\n      setSortedCache(result);\n      setMusics([]);\n      setPage(0);\n    }\n  }, [\n    musicsCache,\n    sortBy,\n    sortType,\n    setPage,\n    setSortedCache,\n    musicTags,\n    musicTag,\n  ]);\n\n  useEffect(() => {\n    if (sortedCache.length) {\n      setMusics((musics) => [\n        ...musics,\n        ...getPaginatedMusics(sortedCache, page, limit),\n      ]);\n      setLastQueryFin(true);\n    }\n  }, [page, limit, setLastQueryFin, sortedCache]);\n\n  const callback = (\n    entries: readonly IntersectionObserverEntry[],\n    setHasMore: React.Dispatch<React.SetStateAction<boolean>>\n  ) => {\n    if (!isReadyRef.current) return;\n    if (\n      entries[0].isIntersecting &&\n      lastQueryFinRef.current &&\n      (!sortedCacheRef.current.length ||\n        sortedCacheRef.current.length > pageRef.current * limitRef.current)\n    ) {\n      setPage((page) => page + 1);\n      setLastQueryFin(false);\n    } else if (\n      sortedCacheRef.current.length &&\n      sortedCacheRef.current.length <= pageRef.current * limitRef.current\n    ) {\n      setHasMore(false);\n    }\n  };\n\n  return (\n    <Fragment>\n      <Typography variant=\"h6\" className={layoutClasses.header}>\n        {t(\"common:music\")}\n      </Typography>\n      <Container className={layoutClasses.content}>\n        <Grid container justify=\"space-between\">\n          <ButtonGroup style={{ marginBottom: \"1%\" }}>\n            <Button\n              // variant={viewGridType === \"grid\" ? \"outlined\" : \"contained\"}\n              onClick={() => {\n                setViewGridType(\"grid\");\n                localStorage.setItem(\"music-list-grid-view-type\", \"grid\");\n              }}\n              color={viewGridType === \"grid\" ? \"primary\" : \"default\"}\n            >\n              {viewGridType === \"grid\" ? (\n                <ViewGrid></ViewGrid>\n              ) : (\n                <ViewGridOutline></ViewGridOutline>\n              )}\n            </Button>\n            <Button\n              // variant={viewGridType === \"agenda\" ? \"outlined\" : \"contained\"}\n              onClick={() => {\n                setViewGridType(\"agenda\");\n                localStorage.setItem(\"music-list-grid-view-type\", \"agenda\");\n              }}\n              color={viewGridType === \"agenda\" ? \"primary\" : \"default\"}\n            >\n              {viewGridType === \"agenda\" ? (\n                <ViewAgenda></ViewAgenda>\n              ) : (\n                <ViewAgendaOutline></ViewAgendaOutline>\n              )}\n            </Button>\n            {/* <Button\n              variant={viewGridType === \"comfy\" ? \"outlined\" : \"contained\"}\n              onClick={() => setViewGridType(\"comfy\")}\n            >\n              <ViewComfy></ViewComfy>\n            </Button> */}\n          </ButtonGroup>\n          <ButtonGroup color=\"primary\" style={{ marginBottom: \"1%\" }}>\n            <Button size=\"medium\" onClick={() => setFilterOpened((v) => !v)}>\n              {filterOpened ? <Filter /> : <FilterOutline />}\n              {filterOpened ? <Sort /> : <SortOutlined />}\n            </Button>\n          </ButtonGroup>\n        </Grid>\n        <Collapse in={filterOpened}>\n          <Paper className={interactiveClasses.container}>\n            <Grid container direction=\"column\" spacing={1}>\n              <Grid\n                item\n                container\n                xs={12}\n                alignItems=\"center\"\n                justify=\"space-between\"\n              >\n                <Grid item xs={12} md={1}>\n                  <Typography classes={{ root: interactiveClasses.caption }}>\n                    {t(\"filter:music_tag.caption\")}\n                  </Typography>\n                </Grid>\n                <Grid item container xs={12} md={10} spacing={1}>\n                  <Grid item>\n                    <FormControl>\n                      <Select\n                        value={musicTag}\n                        onChange={(e) => {\n                          setMusicTag(e.target.value as string);\n                        }}\n                      >\n                        {[\n                          \"all\",\n                          \"vocaloid\",\n                          \"theme_park\",\n                          \"street\",\n                          \"idol\",\n                          \"school_refusal\",\n                          \"light_music_club\",\n                          \"other\",\n                        ].map((tag) => (\n                          <MenuItem key={tag} value={tag}>\n                            {musicTagToName[tag]}\n                          </MenuItem>\n                        ))}\n                      </Select>\n                    </FormControl>\n                  </Grid>\n                </Grid>\n              </Grid>\n              <Grid\n                item\n                container\n                xs={12}\n                alignItems=\"center\"\n                justify=\"space-between\"\n              >\n                <Grid item xs={12} md={1}>\n                  <Typography classes={{ root: interactiveClasses.caption }}>\n                    {t(\"filter:sort.caption\")}\n                  </Typography>\n                </Grid>\n                <Grid item container xs={12} md={10} spacing={1}>\n                  <Grid item>\n                    <FormControl>\n                      <Select\n                        value={sortType}\n                        onChange={(e) => {\n                          setSortType(e.target.value as string);\n                          localStorage.setItem(\n                            \"music-list-filter-sort-type\",\n                            e.target.value as string\n                          );\n                        }}\n                      >\n                        <MenuItem value=\"asc\">\n                          {t(\"filter:sort.ascending\")}\n                        </MenuItem>\n                        <MenuItem value=\"desc\">\n                          {t(\"filter:sort.descending\")}\n                        </MenuItem>\n                      </Select>\n                    </FormControl>\n                  </Grid>\n                  <Grid item>\n                    <FormControl>\n                      <Select\n                        value={sortBy}\n                        onChange={(e) => {\n                          setSortBy(e.target.value as string);\n                          localStorage.setItem(\n                            \"music-list-filter-sort-by\",\n                            e.target.value as string\n                          );\n                        }}\n                      >\n                        <MenuItem value=\"id\">{t(\"common:id\")}</MenuItem>\n                        <MenuItem value=\"publishedAt\">\n                          {t(\"common:startAt\")}\n                        </MenuItem>\n                      </Select>\n                    </FormControl>\n                  </Grid>\n                </Grid>\n              </Grid>\n            </Grid>\n          </Paper>\n        </Collapse>\n        <InfiniteScroll<IMusicInfo>\n          ViewComponent={ListCard[viewGridType]}\n          callback={callback}\n          data={musics}\n          gridSize={\n            ({\n              grid: {\n                xs: 12,\n                sm: 6,\n                md: 4,\n                lg: 3,\n              },\n              agenda: {\n                xs: 12,\n              },\n              comfy: {\n                xs: 12,\n              },\n            } as const)[viewGridType]\n          }\n        />\n      </Container>\n    </Fragment>\n  );\n};\n\nexport default MusicList;\n"],"sourceRoot":""}