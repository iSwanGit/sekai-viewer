(this["webpackJsonpsekai-viewer"]=this["webpackJsonpsekai-viewer"]||[]).push([[35],{6021:function(e,t,n){"use strict";n.d(t,"j",(function(){return O})),n.d(t,"e",(function(){return x})),n.d(t,"d",(function(){return w})),n.d(t,"f",(function(){return C})),n.d(t,"g",(function(){return E})),n.d(t,"c",(function(){return S})),n.d(t,"h",(function(){return N})),n.d(t,"b",(function(){return I})),n.d(t,"i",(function(){return T})),n.d(t,"a",(function(){return A}));var a=n(6040),r=n(84),c=n.n(r),o=n(100),i=n(29),s=n(86),u=n.n(s),l=n(0),p=n(6044),f=n(6042),d=n.n(f),m=n(87),b=n.n(m),h=n(6027),g=n(49),v=n(13),k=new p.a;function O(e){var t=Object(l.useState)(e),n=Object(i.a)(t,2),a=n[0],r=n[1],c=Object(l.useRef)(a);return Object(l.useEffect)((function(){c.current=a}),[a]),[a,c,r]}var j={};function x(e){var t=O([]),n=Object(i.a)(t,3),a=n[0],r=n[1],s=n[2],p=Object(l.useCallback)(Object(o.a)(c.a.mark((function t(){var n,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.get("".concat(window.isChinaMainland?"https://sekai-json-1258184166.file.myqcloud.com/master":"https://sekai-world.github.io/sekai-master-db-diff","/").concat(e,".json"));case 2:return n=t.sent,a=n.data,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)}))),[e]);return Object(l.useEffect)((function(){j[e]&&j[e].length?s(j[e]):p().then((function(t){s(t),j[e]=t}))}),[p,e,s]),[a,r]}var w={all:"All",vocaloid:g.a.t("unit_profile:piapro.name"),light_music_club:g.a.t("unit_profile:light_sound.name"),idol:g.a.t("unit_profile:idol.name"),school_refusal:g.a.t("unit_profile:school_refusal.name"),theme_park:g.a.t("unit_profile:theme_park.name"),street:g.a.t("unit_profile:street.name"),other:"Other"};function C(e){var t=x("gameCharacters"),n=Object(i.a)(t,1)[0],a=Object(g.c)(),r=a.assetT,c=a.assetI18n;return Object(l.useCallback)((function(t){var a=n.find((function(e){return e.id===t}));if(null===a||void 0===a?void 0:a.firstName)switch(e){case"original":return"".concat(a.firstName," ").concat(a.givenName);case"translated":return["zh-CN","zh-TW","ko","ja"].includes(c.language)?"".concat(r("character_name:".concat(t,".firstName"),a.firstName)," ").concat(r("character_name:".concat(t,".givenName"),a.givenName)):"".concat(r("character_name:".concat(t,".givenName"),a.givenName)," ").concat(r("character_name:".concat(t,".firstName"),a.firstName));case"both":return"".concat(a.firstName," ").concat(a.givenName," | ")+(["zh-CN","zh-TW","ko","ja"].includes(c.language)?"".concat(r("character_name:".concat(t,".firstName"),a.firstName)," ").concat(r("character_name:".concat(t,".givenName"),a.givenName)):"".concat(r("character_name:".concat(t,".givenName"),a.givenName)," ").concat(r("character_name:".concat(t,".firstName"),a.firstName)))}return null===a||void 0===a?void 0:a.givenName}),[c.language,r,n,e])}function E(){var e=O([]),t=Object(i.a)(e,3),n=t[0],a=t[1],r=t[2],s=Object(l.useCallback)(Object(o.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("/metas.json");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),[]);return Object(l.useEffect)((function(){j.metas&&j.metas.length?r(j.metas):s().then((function(e){r(e),j.metas=e}))}),[s,r]),[n,a]}var y=new d.a({concurrency:1});function S(e,t){return _.apply(this,arguments)}function _(){return(_=Object(o.a)(c.a.mark((function e(t,n){var a,r,o,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Modernizr.webplossless,r="".concat("https://sekai-res.dnaroma.eu","/file/sekai-assets/").concat(t),!t.endsWith(".webp")||a){e.next=23;break}return e.next=5,b.a.getItem(r);case 5:if(o=e.sent){e.next=19;break}return e.next=9,u.a.get(r,{responseType:"arraybuffer"});case 9:return i=e.sent,e.next=12,y.add((function(){return k.decode(new Uint8Array(i.data))}));case 12:return o=e.sent,e.next=15,b.a.setItem(r,o);case 15:case 19:return n&&n(o),e.abrupt("return",o);case 21:e.next=25;break;case 23:return n&&n(r),e.abrupt("return",r);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){var t=x("mobCharacters"),n=Object(i.a)(t,1)[0],r=x("character2ds"),s=Object(i.a)(r,1)[0],p=C(e);return Object(l.useCallback)(function(){var e=Object(o.a)(c.a.mark((function e(t,r){var o,i,l,f,d,m,b,g,v,k,O,j,x,w,C,E,y,_;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o={characters:[],actions:[]},s.length&&n.length&&t){e.next=3;break}return e.abrupt("return",o);case 3:return e.t0=u.a,e.next=6,S(t);case 6:return e.t1=e.sent,e.t2={responseType:"json"},e.next=10,e.t0.get.call(e.t0,e.t1,e.t2);case 10:if(i=e.sent,l=i.data,f=l.ScenarioId,d=l.AppearCharacters,m=l.Snippets,b=l.TalkData,g=l.SpecialEffectData,v=l.SoundData,k=l.FirstBgm,!(O=l.FirstBackground)){e.next=23;break}return e.t3=o.actions,e.t4=h.b.SpecialEffect,e.t5=h.c.WaitUnitilFinished,e.t6=k,e.next=20,S("scenario/background/".concat(O,"_rip/").concat(O,".webp"));case 20:e.t7=e.sent,e.t8={type:e.t4,isWait:e.t5,delay:0,seType:"ChangeBackground",body:e.t6,resource:e.t7},e.t3.push.call(e.t3,e.t8);case 23:if(!k){e.next=33;break}return e.t9=o.actions,e.t10=h.b.Sound,e.t11=h.c.WaitUnitilFinished,e.t12=h.d[0],e.next=30,S("sound/scenario/bgm/".concat(k,"_rip/").concat(k,".mp3"));case 30:e.t13=e.sent,e.t14={type:e.t10,isWait:e.t11,delay:0,playMode:e.t12,hasBgm:!0,hasSe:!1,bgm:e.t13,se:""},e.t9.push.call(e.t9,e.t14);case 33:o.characters=d.map((function(e){var t=s.find((function(t){return t.id===e.Character2dId}));switch(t.characterType){case"game_character":return{id:t.characterId,name:p(t.characterId)};case"mob":return{id:t.characterId,name:n.find((function(e){return e.id===t.characterId})).name}}})),j=Object(a.a)(m),e.prev=35,j.s();case 37:if((x=j.n()).done){e.next=105;break}w=x.value,C={},e.t15=w.Action,e.next=e.t15===h.b.Talk?43:e.t15===h.b.SpecialEffect?45:e.t15===h.b.Sound?76:101;break;case 43:return e.delegateYield(c.a.mark((function e(){var t,n,a,o,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=b[w.ReferenceIndex],n={id:0,name:""},t.TalkCharacters[0].Character2dId&&(a=s.find((function(e){return e.id===t.TalkCharacters[0].Character2dId})),n.id=a.characterId),n.name=t.WindowDisplayName,o=t.Voices.length?"sound/".concat(r?"card_":"","scenario/voice/").concat(f,"_rip/").concat(t.Voices[0].VoiceId,".mp3"):"",t.Voices.length&&t.Voices[0].VoiceId.startsWith("partvoice")&&(i=s.find((function(e){return e.id===t.TalkCharacters[0].Character2dId})),o="sound/scenario/part_voice/".concat(i.assetName,"_").concat(i.unit,"_rip/").concat(t.Voices[0].VoiceId,".mp3")),e.t0=w.Action,e.t1=w.ProgressBehavior===h.c.WaitUnitilFinished,e.t2=w.Delay,e.t3=n,e.t4=t.Body,!t.Voices.length){e.next=17;break}return e.next=14,S(o);case 14:e.t5=e.sent,e.next=18;break;case 17:e.t5="";case 18:e.t6=e.t5,C={type:e.t0,isWait:e.t1,delay:e.t2,chara:e.t3,body:e.t4,voice:e.t6};case 20:case"end":return e.stop()}}),e)}))(),"t16",44);case 44:return e.abrupt("break",102);case 45:if(E=g[w.ReferenceIndex],y=h.e[E.EffectType],e.t17=w.Action,e.t18=w.ProgressBehavior===h.c.WaitUnitilFinished,e.t19=w.Delay,e.t20=y,e.t21=E.StringVal,"FullScreenText"!==y){e.next=58;break}return e.next=55,S("sound/scenario/voice/".concat(f,"_rip/").concat(E.StringValSub,".mp3"));case 55:e.t22=e.sent,e.next=73;break;case 58:if("ChangeBackground"!==y){e.next=64;break}return e.next=61,S("scenario/background/".concat(E.StringValSub,"_rip/").concat(E.StringValSub,".webp"));case 61:e.t23=e.sent,e.next=72;break;case 64:if("Movie"!==y){e.next=70;break}return e.next=67,S("scenario/movie/".concat(E.StringVal,"_rip/").concat(E.StringVal.split("_")[0],".mp4"));case 67:e.t24=e.sent,e.next=71;break;case 70:e.t24="";case 71:e.t23=e.t24;case 72:e.t22=e.t23;case 73:return e.t25=e.t22,C={type:e.t17,isWait:e.t18,delay:e.t19,seType:e.t20,body:e.t21,resource:e.t25},e.abrupt("break",102);case 76:if(_=v[w.ReferenceIndex],e.t26=w.Action,e.t27=w.ProgressBehavior===h.c.WaitUnitilFinished,e.t28=w.Delay,e.t29=h.d[_.PlayMode],e.t30=!!_.Bgm,e.t31=!!_.Se,!_.Bgm){e.next=89;break}return e.next=86,S("sound/scenario/bgm/".concat(_.Bgm,"_rip/").concat(_.Bgm,".mp3"));case 86:e.t32=e.sent,e.next=90;break;case 89:e.t32="";case 90:if(e.t33=e.t32,!_.Se){e.next=97;break}return e.next=94,S("sound/scenario/se/se_pack00001_rip/".concat(_.Se,".mp3"));case 94:e.t34=e.sent,e.next=98;break;case 97:e.t34="";case 98:return e.t35=e.t34,C={type:e.t26,isWait:e.t27,delay:e.t28,playMode:e.t29,hasBgm:e.t30,hasSe:e.t31,bgm:e.t33,se:e.t35},e.abrupt("break",102);case 101:C={type:w.Action,isWait:w.ProgressBehavior===h.c.WaitUnitilFinished,delay:w.Delay};case 102:o.actions.push(C);case 103:e.next=37;break;case 105:e.next=110;break;case 107:e.prev=107,e.t36=e.catch(35),j.e(e.t36);case 110:return e.prev=110,j.f(),e.finish(110);case 113:return e.abrupt("return",o);case 114:case"end":return e.stop()}}),e,null,[[35,107,110,113]])})));return function(t,n){return e.apply(this,arguments)}}(),[s,p,n])}function I(){return(new Date).toLocaleDateString("en-US",{timeZone:"Asia/Tokyo"}).split("/").slice(0,2).join("/")}function T(){return new URLSearchParams(Object(v.h)().search)}function A(e){for(var t=[],n=0;n<e;n+=1){for(var a="0123456789ABCDEF".split(""),r="#",c=0;c<6;c+=1)r+=a[Math.floor(16*Math.random())];t.push(r)}return t}},6022:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(35),r=n(5969),c=Object(r.a)((function(e){var t;return{header:{fontWeight:"bold"},content:{marginTop:e.spacing(3),marginBottom:e.spacing(3),marginLeft:"auto",marginRight:"auto"},alert:{margin:e.spacing(1,0)},bold:{fontWeight:e.typography.fontWeightBold},avatarProfile:(t={},Object(a.a)(t,e.breakpoints.down("sm"),{height:e.spacing(10),width:e.spacing(10)}),Object(a.a)(t,e.breakpoints.up("md"),{height:e.spacing(20),width:e.spacing(20)}),t),capitalize:{textTransform:"capitalize"}}}))},6027:function(e,t,n){"use strict";var a,r,c,o,i;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"e",(function(){return c})),n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return i})),function(e){e[e.None=0]="None",e[e.Talk=1]="Talk",e[e.CharacerLayout=2]="CharacerLayout",e[e.InputName=3]="InputName",e[e.CharacterMotion=4]="CharacterMotion",e[e.Selectable=5]="Selectable",e[e.SpecialEffect=6]="SpecialEffect",e[e.Sound=7]="Sound"}(a||(a={})),function(e){e[e.Now=0]="Now",e[e.WaitUnitilFinished=1]="WaitUnitilFinished"}(r||(r={})),function(e){e[e.None=0]="None",e[e.BlackIn=1]="BlackIn",e[e.BlackOut=2]="BlackOut",e[e.WhiteIn=3]="WhiteIn",e[e.WhiteOut=4]="WhiteOut",e[e.ShakeScreen=5]="ShakeScreen",e[e.ShakeWindow=6]="ShakeWindow",e[e.ChangeBackground=7]="ChangeBackground",e[e.Telop=8]="Telop",e[e.FlashbackIn=9]="FlashbackIn",e[e.FlashbackOut=10]="FlashbackOut",e[e.ChangeCardStill=11]="ChangeCardStill",e[e.AmbientColorNormal=12]="AmbientColorNormal",e[e.AmbientColorEvening=13]="AmbientColorEvening",e[e.AmbientColorNight=14]="AmbientColorNight",e[e.PlayScenarioEffect=15]="PlayScenarioEffect",e[e.StopScenarioEffect=16]="StopScenarioEffect",e[e.ChangeBackgroundStill=17]="ChangeBackgroundStill",e[e.PlaceInfo=18]="PlaceInfo",e[e.Movie=19]="Movie",e[e.SekaiIn=20]="SekaiIn",e[e.SekaiOut=21]="SekaiOut",e[e.AttachCharacterShader=22]="AttachCharacterShader",e[e.SimpleSelectable=23]="SimpleSelectable",e[e.FullScreenText=24]="FullScreenText",e[e.StopShakeScreen=25]="StopShakeScreen",e[e.StopShakeWindow=26]="StopShakeWindow"}(c||(c={})),function(e){e[e.CrossFade=0]="CrossFade",e[e.Stack=1]="Stack",e[e.SpecialSePlay=2]="SpecialSePlay",e[e.Stop=3]="Stop"}(o||(o={})),function(e){e.PLAY_LIVE="play_live",e.WAITING_ROOM="waiting_room",e.COLLECT_COSTUME_3D="collect_costume_3d",e.COLLECT_STAMP="collect_stamp",e.READ_AREA_TALK="read_area_talk",e.MASTER_RANK="master_rank",e.READ_CARD_EPISODE_FIRST="read_card_episode_first",e.READ_CARD_EPISODE_SECOND="read_card_episode_second"}(i||(i={}))},6032:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(35),r=n(5969),c=Object(r.a)((function(e){return{container:{margin:e.spacing(1,0),padding:e.spacing(1,2)},caption:Object(a.a)({},e.breakpoints.up("md"),{textAlign:"right"}),sliderContainer:Object(a.a)({},e.breakpoints.up("md"),{paddingRight:e.spacing(5)}),inputHidden:{display:"none"},noDecoration:{textDecoration:"none","&:hover":{textDecoration:"underline"},color:e.palette.text.primary}}}))},6034:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(84),r=n.n(a),c=n(100),o=n(86),i=n.n(o),s=n(0);function u(e){var t=Object(s.useMemo)((function(){var t=i.a.create({baseURL:"https://strapi.sekai.best"});return t.interceptors.request.use((function(t){return e&&(t.headers.authorization="Bearer ".concat(e)),t})),t.interceptors.response.use((function(e){return e}),(function(e){throw e.response.data.message?e.id=e.response.data.message[0].messages[0].id:e.id=e.message,e})),t}),[e]);return{postLoginLocal:Object(s.useCallback)(function(){var e=Object(c.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.post("/auth/local",n);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),postRegisterLocal:Object(s.useCallback)(function(){var e=Object(c.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.post("/auth/local/register",n);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),getRedirectConnectLoginUrl:Object(s.useCallback)((function(e){return"".concat(t.getUri({url:"".concat("https://strapi.sekai.best","/connect/").concat(e)}))}),[t]),getConnectCallback:Object(s.useCallback)(function(){var e=Object(c.a)(r.a.mark((function e(n,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/auth/".concat(n,"/callback").concat(a));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[t]),getUserMe:Object(s.useCallback)(function(){var e=Object(c.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/users/me",n?{headers:{authorization:"Bearer ".concat(n)}}:{});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),postUpload:Object(s.useCallback)(function(){var e=Object(c.a)(r.a.mark((function e(n,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.post("/upload",n,{headers:Object.assign({"Content-Type":"multipart/form-data"},a?{authorization:"Bearer ".concat(a)}:{})});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[t]),putUserMetadataMe:Object(s.useCallback)(function(){var e=Object(c.a)(r.a.mark((function e(n,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.put("/user-metadata/me",a);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[t]),postForgotPassword:Object(s.useCallback)(function(){var e=Object(c.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.post("/auth/forgot-password",{email:n});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),postResetPassword:Object(s.useCallback)(function(){var e=Object(c.a)(r.a.mark((function e(n,a,c){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.post("/auth/reset-password",{code:n,password:a,passwordConfirmation:c});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),[t]),getSekaiProfileMe:Object(s.useCallback)(function(){var e=Object(c.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/sekai-profiles/me",n?{headers:{authorization:"Bearer ".concat(n)}}:{});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),postSekaiProfileVerify:Object(s.useCallback)(function(){var e=Object(c.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.post("/sekai-profiles/verify",{userid:n});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),postSekaiProfileConfirm:Object(s.useCallback)(function(){var e=Object(c.a)(r.a.mark((function e(n,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.post("/sekai-profiles/".concat(n,"/confirm"),{userid:a});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[t]),putSekaiProfileUpdate:Object(s.useCallback)(function(){var e=Object(c.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.put("/sekai-profiles/".concat(n,"/update"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),getLanguages:Object(s.useCallback)(Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/languages");case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)}))),[t]),getUserMetadataMe:Object(s.useCallback)(function(){var e=Object(c.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/user-metadata/me",n?{headers:{authorization:"Bearer ".concat(n)}}:{});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),getSekaiCurrentEvent:Object(s.useCallback)(Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/sekai-current-event");case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)}))),[t]),getSekaiProfileEventRecordMe:Object(s.useCallback)(function(){var e=Object(c.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/sekai-profile-event-records/me",{params:n?{eventId:n}:{}});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),postSekaiProfileEventRecord:Object(s.useCallback)(function(){var e=Object(c.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.post("/sekai-profile-event-records/record",{eventId:n});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),getAnnouncements:Object(s.useCallback)(Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/announcements?",{params:{_sort:"isPin:DESC"}});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)}))),[t]),getAnnouncementById:Object(s.useCallback)(function(){var e=Object(c.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/announcements/".concat(n));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),getAnnouncementPage:Object(s.useCallback)(Object(c.a)(r.a.mark((function e(){var n,a,c=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>0&&void 0!==c[0]?c[0]:30,a=c.length>1&&void 0!==c[1]?c[1]:0,e.next=4,t.get("/announcements",{params:{_limit:n,_start:a*n,_sort:"isPin:DESC"}});case 4:return e.abrupt("return",e.sent.data);case 5:case"end":return e.stop()}}),e)}))),[t]),getAnnouncementCount:Object(s.useCallback)(Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Number,e.next=3,t.get("/announcements/count");case 3:return e.t1=e.sent.data,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)}))),[t]),getComments:Object(s.useCallback)(function(){var e=Object(c.a)(r.a.mark((function e(n,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/comments/".concat(n,":").concat(a));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[t]),postComment:Object(s.useCallback)(function(){var e=Object(c.a)(r.a.mark((function e(n,a,c,o){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.post("/comments/".concat(n,":").concat(a),{authorUser:c,content:o,related:[{refId:a,ref:n,field:"comments"}]});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),[t]),getUserInfo:Object(s.useCallback)(function(){var e=Object(c.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/users/".concat(n));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),patchCommentLike:Object(s.useCallback)(function(){var e=Object(c.a)(r.a.mark((function e(n,a,c){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.patch("/comments/".concat(n,":").concat(a,"/comment/").concat(c,"/like"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),[t]),postCommentAbuse:Object(s.useCallback)(function(){var e=Object(c.a)(r.a.mark((function e(n,a,c,o,i){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.post("/comments/".concat(n,":").concat(a,"/comment/").concat(c,"/report-abuse"),{reason:o,content:i});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a,r,c){return e.apply(this,arguments)}}(),[t])}}},6221:function(e,t,n){"use strict";var a=n(2),r=n(9),c=n(1),o=n(0),i=(n(4),n(3)),s=n(5),u=n(16),l=n(6848),p=n(32),f=n(7),d=n(39),m=n(6001),b=n(133),h=n(12),g=o.forwardRef((function(e,t){var n=e.action,r=e.classes,s=e.className,u=e.message,l=e.role,p=void 0===l?"alert":l,f=Object(a.a)(e,["action","classes","className","message","role"]);return o.createElement(b.a,Object(c.a)({role:p,square:!0,elevation:6,className:Object(i.a)(r.root,s),ref:t},f),o.createElement("div",{className:r.message},u),n?o.createElement("div",{className:r.action},n):null)})),v=Object(s.a)((function(e){var t="light"===e.palette.type?.8:.98,n=Object(h.b)(e.palette.background.default,t);return{root:Object(c.a)({},e.typography.body2,Object(r.a)({color:e.palette.getContrastText(n),backgroundColor:n,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:e.shape.borderRadius,flexGrow:1},e.breakpoints.up("sm"),{flexGrow:"initial",minWidth:288})),message:{padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}}}),{name:"MuiSnackbarContent"})(g),k=o.forwardRef((function(e,t){var n=e.action,r=e.anchorOrigin,s=(r=void 0===r?{vertical:"bottom",horizontal:"center"}:r).vertical,b=r.horizontal,h=e.autoHideDuration,g=void 0===h?null:h,k=e.children,O=e.classes,j=e.className,x=e.ClickAwayListenerProps,w=e.ContentProps,C=e.disableWindowBlurListener,E=void 0!==C&&C,y=e.message,S=e.onClose,_=e.onEnter,N=e.onEntered,I=e.onEntering,T=e.onExit,A=e.onExited,B=e.onExiting,D=e.onMouseEnter,L=e.onMouseLeave,M=e.open,P=e.resumeHideDuration,W=e.TransitionComponent,R=void 0===W?m.a:W,F=e.transitionDuration,U=void 0===F?{enter:u.b.enteringScreen,exit:u.b.leavingScreen}:F,V=e.TransitionProps,z=Object(a.a)(e,["action","anchorOrigin","autoHideDuration","children","classes","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onClose","onEnter","onEntered","onEntering","onExit","onExited","onExiting","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"]),H=o.useRef(),q=o.useState(!0),G=q[0],K=q[1],J=Object(p.a)((function(){S&&S.apply(void 0,arguments)})),Y=Object(p.a)((function(e){S&&null!=e&&(clearTimeout(H.current),H.current=setTimeout((function(){J(null,"timeout")}),e))}));o.useEffect((function(){return M&&Y(g),function(){clearTimeout(H.current)}}),[M,g,Y]);var X=function(){clearTimeout(H.current)},Z=o.useCallback((function(){null!=g&&Y(null!=P?P:.5*g)}),[g,P,Y]);return o.useEffect((function(){if(!E&&M)return window.addEventListener("focus",Z),window.addEventListener("blur",X),function(){window.removeEventListener("focus",Z),window.removeEventListener("blur",X)}}),[E,Z,M]),!M&&G?null:o.createElement(l.a,Object(c.a)({onClickAway:function(e){S&&S(e,"clickaway")}},x),o.createElement("div",Object(c.a)({className:Object(i.a)(O.root,O["anchorOrigin".concat(Object(f.a)(s)).concat(Object(f.a)(b))],j),onMouseEnter:function(e){D&&D(e),X()},onMouseLeave:function(e){L&&L(e),Z()},ref:t},z),o.createElement(R,Object(c.a)({appear:!0,in:M,onEnter:Object(d.a)((function(){K(!1)}),_),onEntered:N,onEntering:I,onExit:T,onExited:Object(d.a)((function(){K(!0)}),A),onExiting:B,timeout:U,direction:"top"===s?"down":"up"},V),k||o.createElement(v,Object(c.a)({message:y,action:n},w)))))}));t.a=Object(s.a)((function(e){var t={top:8},n={bottom:8},a={justifyContent:"flex-end"},o={justifyContent:"flex-start"},i={top:24},s={bottom:24},u={right:24},l={left:24},p={left:"50%",right:"auto",transform:"translateX(-50%)"};return{root:{zIndex:e.zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},anchorOriginTopCenter:Object(c.a)({},t,Object(r.a)({},e.breakpoints.up("sm"),Object(c.a)({},i,p))),anchorOriginBottomCenter:Object(c.a)({},n,Object(r.a)({},e.breakpoints.up("sm"),Object(c.a)({},s,p))),anchorOriginTopRight:Object(c.a)({},t,a,Object(r.a)({},e.breakpoints.up("sm"),Object(c.a)({left:"auto"},i,u))),anchorOriginBottomRight:Object(c.a)({},n,a,Object(r.a)({},e.breakpoints.up("sm"),Object(c.a)({left:"auto"},s,u))),anchorOriginTopLeft:Object(c.a)({},t,o,Object(r.a)({},e.breakpoints.up("sm"),Object(c.a)({right:"auto"},i,l))),anchorOriginBottomLeft:Object(c.a)({},n,o,Object(r.a)({},e.breakpoints.up("sm"),Object(c.a)({right:"auto"},s,l)))}}),{flip:!1,name:"MuiSnackbar"})(k)},6229:function(e,t,n){"use strict";var a=n(1),r=n(2),c=n(0),o=(n(4),n(3)),i=n(7),s=n(5),u=n(104),l=n(8),p=n(47),f=c.forwardRef((function(e,t){var n=e.classes,s=e.className,f=e.color,d=void 0===f?"primary":f,m=e.component,b=void 0===m?"a":m,h=e.onBlur,g=e.onFocus,v=e.TypographyClasses,k=e.underline,O=void 0===k?"hover":k,j=e.variant,x=void 0===j?"inherit":j,w=Object(r.a)(e,["classes","className","color","component","onBlur","onFocus","TypographyClasses","underline","variant"]),C=Object(u.a)(),E=C.isFocusVisible,y=C.onBlurVisible,S=C.ref,_=c.useState(!1),N=_[0],I=_[1],T=Object(l.a)(t,S);return c.createElement(p.a,Object(a.a)({className:Object(o.a)(n.root,n["underline".concat(Object(i.a)(O))],s,N&&n.focusVisible,"button"===b&&n.button),classes:v,color:d,component:b,onBlur:function(e){N&&(y(),I(!1)),h&&h(e)},onFocus:function(e){E(e)&&I(!0),g&&g(e)},ref:T,variant:x},w))}));t.a=Object(s.a)({root:{},underlineNone:{textDecoration:"none"},underlineHover:{textDecoration:"none","&:hover":{textDecoration:"underline"}},underlineAlways:{textDecoration:"underline"},button:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none","&::-moz-focus-inner":{borderStyle:"none"},"&$focusVisible":{outline:"auto"}},focusVisible:{}},{name:"MuiLink"})(f)},6360:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(6);t.a=Object(c.a)(r.a.createElement("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"}),"Twitter")},6429:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(6);t.a=Object(c.a)(r.a.createElement("path",{d:"M12.65 10C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H17v4h4v-4h2v-4H12.65zM7 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"}),"VpnKey")},6763:function(e,t,n){"use strict";n.r(t);var a=n(84),r=n.n(a),c=n(100),o=n(29),i=n(14),s=n(5976),u=n(47),l=n(6005),p=n(6211),f=n(6873),d=n(5957),m=n(6247),b=n(5989),h=n(6229),g=n(6221),v=n(5999),k=n(6429),O=n(6360),j=n(6266),x=n(6141),w=n(6220),C=n(38),E=n(0),y=n.n(E),S=n(5933),_=n(13),N=n(50),I=n(6032),T=n(6022),A=n(6021),B=n(6034),D=n(109);t.default=function(){var e=Object(i.a)(),t=Object(T.a)(),n=Object(I.a)(),a=Object(S.a)().t,L=Object(A.i)(),M=Object(_.g)(),P=Object(D.a)(),W=Object(D.a)().decodedToken,R=Object(B.a)(),F=R.postLoginLocal,U=R.getRedirectConnectLoginUrl,V=R.getUserMetadataMe,z=Object(s.a)(e.breakpoints.up("md")),H=Object(E.useState)(!!L.get("error")),q=Object(o.a)(H,2),G=q[0],K=q[1],J=Object(E.useState)(L.get("error")),Y=Object(o.a)(J,1)[0];return Object(E.useEffect)((function(){document.title=a("title:login")}),[a]),y.a.createElement(E.Fragment,null,y.a.createElement(u.a,{variant:"h6",className:t.header},a("common:login")),y.a.createElement(l.a,{className:t.content,maxWidth:"md"},y.a.createElement(x.c,{initialValues:{identifier:W?W.identifier:"",password:""},validate:function(e){var t={};return e.identifier||(t.identifier=a("auth:error.required")),e.password||(t.password=a("auth:error.required")),t},onSubmit:function(){var e=Object(c.a)(r.a.mark((function e(t,n){var c,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.setErrors,e.prev=1,e.next=4,F(t);case 4:return o=e.sent,P.token=o.jwt,P.user=o.user,e.next=9,V(o.jwt);case 9:P.usermeta=e.sent,M.replace("/user"),localStorage.setItem("lastUserCheck",String((new Date).getTime())),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),"Auth.form.error.invalid"===e.t0.id?c({identifier:a("auth:login.error.invalid"),password:a("auth:login.error.invalid")}):"Auth.form.error.confirmed"===e.t0.id&&c({identifier:a("auth:login.error.email_not_confirmed")});case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,n){return e.apply(this,arguments)}}()},(function(e){var t=e.submitForm,r=e.isSubmitting,c=(e.errors,e.dirty),o=e.isValid;return y.a.createElement(p.a,{container:!0,justify:"center"},y.a.createElement(p.a,{item:!0,xs:12,md:6,container:!0,justify:"center"},y.a.createElement(x.b,null,y.a.createElement(x.a,{component:w.b,name:"identifier",type:"text",label:a("auth:login.label.identifier"),InputProps:{startAdornment:y.a.createElement(f.a,{position:"start"},y.a.createElement(v.a,null))}}),y.a.createElement("br",null),y.a.createElement("br",null),y.a.createElement(x.a,{component:w.b,name:"password",type:"password",label:a("auth:login.label.password"),InputProps:{startAdornment:y.a.createElement(f.a,{position:"start"},y.a.createElement(k.a,null))}}),y.a.createElement("br",null),y.a.createElement("br",null),y.a.createElement(p.a,{container:!0,direction:"column",spacing:1},y.a.createElement(p.a,{item:!0},y.a.createElement(N.b,{to:"/user/forgot",className:n.noDecoration},y.a.createElement(u.a,{variant:"caption",color:"textPrimary"},a("auth:forgot-password")))),y.a.createElement(p.a,{item:!0},y.a.createElement(N.b,{to:"/user/signup",className:n.noDecoration},y.a.createElement(u.a,{variant:"caption",color:"textPrimary"},a("auth:no-account-signup"))))),y.a.createElement("br",null),y.a.createElement("input",{type:"submit",style:{display:"none"}}),y.a.createElement(p.a,{container:!0,spacing:1},y.a.createElement(p.a,{item:!0,xs:12,container:!0,alignItems:"center",spacing:1},y.a.createElement(p.a,{item:!0},y.a.createElement(d.a,{variant:"contained",color:"primary",disabled:r||!c||!o,onClick:t},a("auth:common.loginButton"))),r&&y.a.createElement(p.a,{item:!0},y.a.createElement(m.a,{size:24})))))),y.a.createElement(p.a,{item:!0,xs:12,md:1},y.a.createElement(b.a,{orientation:z?"vertical":"horizontal",style:{margin:z?"0":"1rem 0"}})),y.a.createElement(p.a,{item:!0,xs:12,md:4},y.a.createElement(p.a,{container:!0,direction:"column",spacing:1},y.a.createElement(p.a,{item:!0},y.a.createElement(u.a,null,a("auth:login.connect.desc"))),y.a.createElement(p.a,{item:!0},y.a.createElement(d.a,{component:h.a,href:U("discord"),startIcon:y.a.createElement(C.f,null)},a("auth:login.connect.discord"))),y.a.createElement(p.a,{item:!0},y.a.createElement(d.a,{component:h.a,href:U("twitter"),startIcon:y.a.createElement(O.a,null)},a("auth:login.connect.twitter"))))))}))),y.a.createElement(g.a,{open:G,autoHideDuration:3e3,onClose:function(){K(!1)}},y.a.createElement(j.a,{onClose:function(){K(!1)},severity:"error"},Y)))}}}]);
//# sourceMappingURL=35.83d5cc92.chunk.js.map